<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>R í™œìš© ì„œì§€ë°ì´í„° ë„¤íŠ¸ì›Œí¬ ë¶„ì„ ë° ì‹œê°í™”</title>
    <meta charset="utf-8" />
    <meta name="author" content="ì´ì¤€ì˜" />
    <link href="libs/remark-css-0.0.1/default.css" rel="stylesheet" />
    <link rel="stylesheet" href="css/my_hangul.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# R í™œìš© ì„œì§€ë°ì´í„°<br>ë„¤íŠ¸ì›Œí¬ ë¶„ì„ ë° ì‹œê°í™”
## 2ì¼ì°¨ğŸŒŒ
### ì´ì¤€ì˜
### KISTI, ë¯¸ë˜ê¸°ìˆ ë¶„ì„ì„¼í„°
### 2020ë…„ 5ì›” 26-27ì¼

---

### tidygraphì™€ ggraph ê¸°ì´ˆ ë¬¸ë²•
dplyrê³¼ ggplotì˜ ë¬¸ë²•ì„ ê·¸ëŒ€ë¡œ í™œìš©

```r
library(tidygraph)
library(ggraph)
g &lt;- create_notable("Bull")
plot(g)
```

![](network_course_part02_files/figure-html/unnamed-chunk-1-1.png)&lt;!-- --&gt;

```r
# ì–´ì œ ì—°ìŠµìœ¼ë¡œ ìƒì„±í•˜ë¼ê³  í–ˆë˜ ê²ƒ
```
---
tbl_graph ì˜¤ë¸Œì íŠ¸ì˜ êµ¬ì¡°ë¥¼ ë“¤ì—¬ë‹¤ë³´ê¸°
ë¶„ì„ì˜ ìš•êµ¬...

* ë…¸ë“œ/ì—ì§€ì— ì ‘ê·¼í•´ì„œ 
* ì†ì„±ì„ ìˆ˜ì •/ì¶”ê°€ë¥¼ í•˜ê±°ë‚˜ 
* ì¡°ê±´ì— ë§ëŠ” ê²ƒì„ ê³¨ë¼ë‚´ê³  ì‹¶ë‹¤.  


```r
# ë‹¤ì‹œ êµ¬ì¡° ë“¤ì—¬ë‹¤ë³´ê¸° 
g
```

```
## # A tbl_graph: 5 nodes and 5 edges
## #
## # An undirected simple graph with 1 component
## #
## # Node Data: 5 x 0 (active)
## #
## # Edge Data: 5 x 2
##    from    to
##   &lt;int&gt; &lt;int&gt;
## 1     1     2
## 2     1     3
## 3     2     3
## # â€¦ with 2 more rows
```
ë‹¹ì¥ ì´ ê·¸ë˜í”„ëŠ” ë…¸ë“œì˜ ì´ë¦„ë„ ì—†ìŒ. 
---
#### ë…¸ë“œ, ì—ì§€ì— ëŒ€í•œ ì ‘ê·¼ 
activate í•¨ìˆ˜ë¥¼ ì“°ë©´ ë¨. 

```r
# activate(nodes) / %N&gt;% 
# activate(edges) / %E&gt;%
g &lt;- g %&gt;% activate(nodes) %&gt;% 
  mutate(name = letters[1:5],
         size = c(1,3,3,2,1)) %&gt;% 
  activate(edges) %&gt;% mutate(weight = c(5,2,2,1,5))
g # ì˜¤ë¸Œì íŠ¸ ì¶œë ¥ì‹œ ìµœì¢… activateëœ ê²ƒì„ ë¨¼ì € í‘œì‹œ
```

```
## # A tbl_graph: 5 nodes and 5 edges
## #
## # An undirected simple graph with 1 component
## #
## # Edge Data: 5 x 3 (active)
##    from    to weight
##   &lt;int&gt; &lt;int&gt;  &lt;dbl&gt;
## 1     1     2      5
## 2     1     3      2
## 3     2     3      2
## 4     2     4      1
## 5     3     5      5
## #
## # Node Data: 5 x 2
##   name   size
##   &lt;chr&gt; &lt;dbl&gt;
## 1 a         1
## 2 b         3
## 3 c         3
## # â€¦ with 2 more rows
```
---
#### ë³€ê²½ëœ ê²ƒ í™•ì¸ ê²¸ tidygraphë¡œ ë°”ë¡œ ë“¤ì–´ê°  


```r
ggraph(g, layout = "auto") + 
  geom_node_point(aes(size = size), color = "steelblue") +
  geom_edge_link(aes(width = factor(weight)), color = "lightgrey") +
  theme_graph()
```

```
## Using `stress` as default layout
```

&lt;img src="network_course_part02_files/figure-html/unnamed-chunk-4-1.png" width="50%" /&gt;

---
ì•ì—ì„œ ê³ ì³ì•¼ í•  ì  
* nodeê°€ edgeì— ê°€ë ¤ë²„ë¦¼
* edgeë¥¼ widthë¥¼ weightë¡œ í•˜ë‹ˆ ë„ˆë¬´ êµµìŒ. ìŠ¤ì¼€ì¼ ì¡°ì • í•„ìš”
* node ì´ë¦„ì„ ë¶™ì´ê³  ì‹¶ìŒ


```r
ggraph(g, layout = "auto") +
  geom_edge_link(aes(width = factor(weight)), color = "lightgrey") +
  geom_node_point(aes(size = size), color = "steelblue") +
  scale_edge_width_discrete(range = c(1,2)) +
  geom_node_text(aes(label = name), repel = TRUE) +
  theme_graph()
```

```
## Using `stress` as default layout
```

&lt;img src="network_course_part02_files/figure-html/unnamed-chunk-5-1.png" width="42%" /&gt;
---
dplyr, ggplotì˜ ê¸°ì´ˆ ë¬¸ë²•ê³¼ ë™ì¼í•˜ê¸° ë•Œë¬¸ì—, ë„¤íŠ¸ì›Œí¬ ë¶„ì„ì— ì¶”ê°€ëœ ìš”ì†Œë¥¼ í•„ìš”ì— ë”°ë¼ ì°¾ì•„ì„œ í™œìš©í•˜ë©´ ë¨. &lt;br&gt;
ë°”ë¡œ (ì¤€)ì‹¤ì „ ë°ì´í„°ì¸ Zachary ê°€ë¼ë° í´ëŸ½ë°ì´í„°ë¡œ ë‚˜ì•„ê°€ ë´…ë‹ˆë‹¤.  


```r
karate &lt;- create_notable("Zachary")
karate
```

```
## # A tbl_graph: 34 nodes and 78 edges
## #
## # An undirected simple graph with 1 component
## #
## # Node Data: 34 x 0 (active)
## #
## # Edge Data: 78 x 2
##    from    to
##   &lt;int&gt; &lt;int&gt;
## 1     1     2
## 2     1     3
## 3     1     4
## # â€¦ with 75 more rows
```
* 34ê°œ ë…¸ë“œ 78ê°œ ì—£ì§€ 
* 1ë²ˆì€ ì‚¬ë²” Mr. Hi, 34ë²ˆì€ ê´€ì¥ Mr. John A
# ë‹¤íˆ¼ìœ¼ë¡œ ì‚¬ë²”ìª½ 16, ê´€ì¥ìª½ 18ê°œë¡œ ë¶„ë¦¬ 
* community detectionì˜ êµê³¼ì„œ ë°ì´í„°

---
í´ëŸ¬ìŠ¤í„°ë§ì„ ì‹œë„í•´ë´…ë‹ˆë‹¤

```r
karate &lt;- karate %&gt;% activate(nodes) %&gt;% 
  mutate(name = 1:graph_order(),
         group = group_infomap(),
         weight = centrality_pagerank())
karate
```

```
## # A tbl_graph: 34 nodes and 78 edges
## #
## # An undirected simple graph with 1 component
## #
## # Node Data: 34 x 3 (active)
##    name group weight
##   &lt;int&gt; &lt;int&gt;  &lt;dbl&gt;
## 1     1     2 0.0970
## 2     2     2 0.0529
## 3     3     2 0.0571
## 4     4     2 0.0359
## 5     5     3 0.0220
## 6     6     3 0.0291
## # â€¦ with 28 more rows
## #
## # Edge Data: 78 x 2
##    from    to
##   &lt;int&gt; &lt;int&gt;
## 1     1     2
## 2     1     3
## 3     1     4
## # â€¦ with 75 more rows
```
---
ê²°ê³¼ë¥¼ ì‹œê°í™” í•´ë´…ë‹ˆë‹¤. 

```r
ggraph(karate, layout = "kk") + 
  geom_edge_link(color = "lightgrey") +
  geom_node_point(aes(color = factor(group),
                      size = weight)) + 
  geom_node_text(aes(label = name), repel = TRUE) + theme_graph()
```

&lt;img src="network_course_part02_files/figure-html/unnamed-chunk-8-1.png" width="65%" /&gt;
---
ê·¸ë£¹ë³„ë¡œ ë–¼ì–´ë‚´ ë³´ê³  ì‹¶ìœ¼ë©´ facetì„ ì ìš©í•©ë‹ˆë‹¤. 


```r
p + facet_nodes(~group) + theme(legend.position = "none")
```

&lt;img src="network_course_part02_files/figure-html/unnamed-chunk-10-1.png" width="70%" /&gt;
---
facetì€ ë…¸ë“œë¿ë§Œ ì•„ë‹ˆë¼ ì—ì§€ì— ëŒ€í•´ì„œë„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 


```r
# ì´ë¯¸ ë§Œë“¤ì–´ ë‘” Bull ê·¸ë˜í”„ë¥¼ ì´ìš©í•´ë´…ë‹ˆë‹¤. 
ggraph(g, layout = "auto") + 
  geom_edge_link(aes(width = factor(weight)), color = "lightgrey") +
  geom_node_point(aes(size = size), color = "steelblue") +
  scale_edge_width_discrete(range = c(1,2)) + facet_edges(~weight)
```

&lt;img src="network_course_part02_files/figure-html/unnamed-chunk-11-1.png" width="60%" /&gt;
---
#### ì–´ëŠë§ ì¹œê·¼í•´ì§„ mtcars ë¡œ ë§í¬ë¥¼ ìƒì„±í•´ë´…ë‹ˆë‹¤.  
ì—°ì†í˜• ë³€ìˆ˜ë§Œ ê³¨ë¼ì„œ ì´ê²ƒë“¤ì„ featureë¡œ í•œ correlationì„ ê³„ì‚°í•˜ê³  
1ì— ê°€ê¹Œìš´ ë§í¬ë§Œ ë‚¨ê¹ë‹ˆë‹¤.  

```r
library(corrr)
cor_res &lt;- mtcars[, c(1, 3:6)] %&gt;% 
  t() %&gt;% correlate() %&gt;% shave(upper = TRUE) %&gt;% 
  stretch(na.rm = TRUE) %&gt;% filter(r &gt;= 0.998)
cor_res
```

```
## # A tibble: 59 x 3
##    x             y                 r
##    &lt;chr&gt;         &lt;chr&gt;         &lt;dbl&gt;
##  1 Mazda RX4     Mazda RX4 Wag 1.00 
##  2 Mazda RX4     Merc 230      1.00 
##  3 Mazda RX4     Merc 280      0.999
##  4 Mazda RX4     Merc 280C     0.999
##  5 Mazda RX4     Merc 450SL    0.998
##  6 Mazda RX4 Wag Merc 230      1.00 
##  7 Mazda RX4 Wag Merc 280      0.999
##  8 Mazda RX4 Wag Merc 280C     0.999
##  9 Mazda RX4 Wag Merc 450SL    0.998
## 10 Datsun 710    Toyota Corona 0.999
## # â€¦ with 49 more rows
```
---
ë†’ì€ ìƒê´€ê³„ìˆ˜ë¥¼ ê°–ëŠ” ìë™ì°¨ë¥¼ ì‹œê°í™” í•´ë´…ì‹œë‹¤. 

```r
g_cor &lt;- as_tbl_graph(cor_res, directed = FALSE)
ggraph(g_cor, layout = "kk") + geom_edge_link(color = "lightgrey") +
  geom_node_point() + geom_node_text(aes(label = name), size = 3, repel = TRUE)
```

&lt;img src="network_course_part02_files/figure-html/unnamed-chunk-13-1.png" width="65%" /&gt;
---
ë§í¬ë¥¼ ì—°ì†í˜• ë³€ìˆ˜ì— ëŒ€í•´ì„œ í–ˆê¸° ë•Œë¬¸ì—, 3ê°œì˜ componentë¡œ ë‚˜ë‰œ ê²°ê³¼ì— ì‹¤ë¦°ë” ê°¯ìˆ˜ë¼ëŠ” ë³€ìˆ˜ë¥¼ ì¶”ê°€í•´ ë³´ê¸°ë¡œ í•©ë‹ˆë‹¤. 


```r
# mergeë¡œ ê°–ë‹¤ ë¶™í ê¼­ í•„ìš”í•œ ê°’ë§Œ ë°ì´í„°í”„ë ˆì„ìœ¼ë¡œ ë§Œë“­ë‹ˆë‹¤. 
df_cyl &lt;- data.frame(name = rownames(mtcars),
                     cyl = factor(mtcars$cyl))
g_cor &lt;- g_cor %&gt;% activate(nodes) %&gt;% 
  left_join(df_cyl, by = "name")
g_cor
```

```
## # A tbl_graph: 24 nodes and 59 edges
## #
## # An undirected simple graph with 3 components
## #
## # Node Data: 24 x 2 (active)
##   name              cyl  
##   &lt;chr&gt;             &lt;fct&gt;
## 1 Mazda RX4         6    
## 2 Mazda RX4 Wag     6    
## 3 Datsun 710        4    
## 4 Hornet 4 Drive    6    
## 5 Hornet Sportabout 8    
## 6 Valiant           6    
## # â€¦ with 18 more rows
## #
## # Edge Data: 59 x 3
##    from    to     r
##   &lt;int&gt; &lt;int&gt; &lt;dbl&gt;
## 1     1     2 1.00 
## 2     1    20 1.00 
## 3     1     8 0.999
## # â€¦ with 56 more rows
```
---
ì‹¤ë¦°ë”ë¥¼ ì•ì„œ ê·¸ë¦° ê·¸ë˜í”„ì— í‘œì‹œí•´ ë´…ë‹ˆë‹¤. 


```r
ggraph(g_cor, layout = "kk") +
  geom_edge_link(aes(width = r, alpha = r)) +
  scale_edge_width(range = c(0.2, 1)) +
  geom_node_point(aes(color = cyl), size = 2) + 
  geom_node_text(aes(label = name), size = 3, repel = TRUE)
```

&lt;img src="network_course_part02_files/figure-html/unnamed-chunk-15-1.png" width="65%" /&gt;
---
### ê·¸ë˜í”„ì˜ ë³€í˜•/ì¡°ì‘
tidygraphê°€ ë›°ì–´ë‚œ ì ì€ íŠ¹ì • ì¡°ê±´ì— ë§ëŠ” ê·¸ë˜í”„ë¥¼ ì¼ë¶€ë§Œ ë–¼ì–´ ì¡°ì‘ì„ í•˜ê³  ë‹¤ì‹œ ì›ë˜ì˜ ê·¸ë˜í”„ë¡œ ëŒì•„ê°€ëŠ” `morph()`, ì´ê²ƒê³¼ ì—°ë™í•˜ì—¬ ì¼ë¶€ë§Œ ë–¼ì–´ë‚¸ ê²ƒì„ ê·¸ëŒ€ë¡œ ê°€ì ¸ì˜¤ëŠ” `convert()` í•¨ìˆ˜ì˜ ì¡´ì¬ì…ë‹ˆë‹¤.  


```r
myg &lt;- tbl_graph(edges = data.frame(from = c(1,1,1,2,4,4),
                 to = c(2,3,4,5,3,5)),
                 directed = FALSE)
plot(myg)
```

&lt;img src="network_course_part02_files/figure-html/unnamed-chunk-16-1.png" width="50%" /&gt;
---
ì•ì˜ ê·¸ë˜í”„ëŠ” ì‚¬ì‹¤ ì•„ë˜ ê·¸ë¦¼ì˜ ì™¼ìª½ì— í•´ë‹¹í•©ë‹ˆë‹¤. ì´ê²ƒì„ ê°€ì¥ ì˜¤ë¥¸ìª½ì— ìˆëŠ” [**line graph**](https://en.wikipedia.org/wiki/Line_graph)ë¡œ ë³€í˜•í•´ë´…ë‹ˆë‹¤. 

![:scale 90%](pic/line_graph.png)

ì¼ì¼ì´ ê³„ì‚°í•  í•„ìš”ëŠ” ì—†ìŠµë‹ˆë‹¤. tidygraphì—ì„œ ë³€í™˜ í•¨ìˆ˜ë¥¼ ì œê³µí•©ë‹ˆë‹¤. 

```r
myg_line &lt;- convert(myg, to_linegraph)
myg_line
```

```
## # A tbl_graph: 6 nodes and 9 edges
## #
## # An undirected simple graph with 1 component
## #
## # Node Data: 6 x 1 (active)
##   .tidygraph_edge_index
##                   &lt;int&gt;
## 1                     1
## 2                     2
## 3                     3
## 4                     4
## 5                     5
## 6                     6
## #
## # Edge Data: 9 x 2
##    from    to
##   &lt;int&gt; &lt;int&gt;
## 1     1     2
## 2     1     3
## 3     2     3
## # â€¦ with 6 more rows
```
---
to_linegraphì™€ ê°™ì€ ê·¸ë˜í”„ ì¡°ì‘ í•¨ìˆ˜ë“¤ì€ `morph`ì™€ ê°™ì´ ì“°ë©´, ë³¸ì¸ì´ ì‘ì—…í•˜ê³  ìˆëŠ” ê·¸ë˜í”„ì—ì„œ **ì„ì‹œë¡œ** í•´ë‹¹ í•¨ìˆ˜ë¥¼ ì ìš©í•œ ê·¸ë˜í”„ì—ì„œ ì‘ì—…í•˜ê³  ë‹¤ì‹œ ì›ë˜ ê·¸ë˜í”„ë¡œ ëŒì•„ê°€ëŠ” ê²ƒì´ê³ , convertëŠ” ì•„ì˜ˆ í•´ë‹¹ í•¨ìˆ˜ë¥¼ ì ìš©í•œ ê·¸ë˜í”„ë¥¼ ì¶”ì¶œí•´ì£¼ëŠ” ê¸°ëŠ¥ì„ í•©ë‹ˆë‹¤. 


```r
# ë¬¼ë¡  ì•½ê°„ì˜ ìˆ˜ê³ ëŠ” í•„ìš”í•©ë‹ˆë‹¤. 
edge_df &lt;- as_tibble(myg, active = "edges") # ì¤‘ìš”í•œ íŒì…ë‹ˆë‹¤. 
edge_ind &lt;-  edge_df %&gt;%
  mutate(edge_index = paste0(from, ",", to))
myg_line &lt;- myg_line %N&gt;%
  mutate(edge_name = edge_ind$edge_index)
myg_line
```

```
## # A tbl_graph: 6 nodes and 9 edges
## #
## # An undirected simple graph with 1 component
## #
## # Node Data: 6 x 2 (active)
##   .tidygraph_edge_index edge_name
##                   &lt;int&gt; &lt;chr&gt;    
## 1                     1 1,2      
## 2                     2 1,3      
## 3                     3 1,4      
## 4                     4 2,5      
## 5                     5 3,4      
## 6                     6 4,5      
## #
## # Edge Data: 9 x 2
##    from    to
##   &lt;int&gt; &lt;int&gt;
## 1     1     2
## 2     1     3
## 3     2     3
## # â€¦ with 6 more rows
```
---
ê²°ê³¼ë¥¼ í™•ì¸í•´ë´…ë‹ˆë‹¤. ì•ì„œ ë³¸ ìµœì¢… line graphì™€ ë™ì¼í•œì§€ ì‚´í´ ë´…ì‹œë‹¤.  


```r
ggraph(myg_line, layout = "kk") +
  geom_edge_fan() +
  geom_node_point(size = 8, colour = 'steelblue') +
  geom_node_label(aes(label = edge_name),
                 repel = TRUE)
```

&lt;img src="network_course_part02_files/figure-html/unnamed-chunk-19-1.png" width="50%" /&gt;

---
ì´ì œ ë‹¤ë¥¸ ëª‡ê°€ì§€ ê·¸ë˜í”„ ì¡°ì‘ í•¨ìˆ˜ë¥¼ ì—°ìŠµí•´ ë´…ë‹ˆë‹¤. 
`to_subgraph` í•¨ìˆ˜ì…ë‹ˆë‹¤. 


```r
# ì•ì—ì„œ ë¼ì¸ê·¸ë˜í”„ ìµœì´ˆì˜ ê·¸ë˜í”„ì…ë‹ˆë‹¤. 
V(myg)$name &lt;-  1:gorder(myg) # igraph ë°©ì‹ì…ë‹ˆë‹¤. 
ggraph(myg, layout = "kk") +
  geom_edge_link() +
  geom_node_point(size = 8, colour = 'steelblue') +
  geom_node_label(aes(label = name),
                 repel = TRUE)
```

![](network_course_part02_files/figure-html/unnamed-chunk-21-1.png)&lt;!-- --&gt;

---
ì´ì œ íŠ¹ì • ì¡°ê±´ì„ ì¶©ì¡±í•˜ëŠ” subgraphë¥¼ ë½‘ì•„ ë´…ë‹ˆë‹¤. 

```r
myg_sub &lt;- convert(myg, to_subgraph, name %in% c(3, 5),
                   subset_by = "nodes")
# c(1,3, 4)ë“± ì¡°ê±´ì„ ë³€í™”ì‹œí‚¤ë©´ ë©ë‹ˆë‹¤. 
ggraph(myg_sub, layout = "kk") +
  geom_edge_link() +
  geom_node_point(size = 8, colour = 'steelblue') +
  geom_node_label(aes(label = name),
                 repel = TRUE)
```

![](network_course_part02_files/figure-html/unnamed-chunk-22-1.png)&lt;!-- --&gt;
---
ì´ì œëŠ” `to_subcomponent`í•¨ìˆ˜ë¡œ, íŠ¹ì • ë…¸ë“œê°€ í¬í•¨ëœ componentë¥¼ ë½‘ì•„ ì¤ë‹ˆë‹¤. ê´€ë ¨ í•¨ìˆ˜ë¡œ `to_local_neighborhoood` í•¨ìˆ˜ê°€ ìˆìŠµë‹ˆë‹¤. íŠ¹ì • ë…¸ë“œì™€ ì—°ê²°ëœ **ego network**ë¥¼ ì¶”ì¶œí•´ì¤ë‹ˆë‹¤. íŠ¹ì • ë…¸ë“œì™€ ì—°ê²° ë²”ìœ„(order)ë¥¼ ì§€ì •í•´ì¤„ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.  


```r
myg_subcom &lt;- convert(myg, to_subcomponent,
                      node = 1)
# ë‹¹ì—°íˆ ì›ë˜ ê·¸ë˜í”„ ì „ë¶€ë¥¼ ì¶”ì¶œí•´ ì¤ë‹ˆë‹¤. 
ggraph(myg_subcom, layout = "kk") +
  geom_edge_link() +
  geom_node_point(size = 8, colour = 'steelblue') +
  geom_node_label(aes(label = name),
                 repel = TRUE)
```

&lt;img src="network_course_part02_files/figure-html/unnamed-chunk-23-1.png" width="45%" /&gt;
---


```r
myg_neighbor &lt;- convert(myg, to_local_neighborhood,
                      node = 1, order = 1, mode = "all")
ggraph(myg_neighbor, layout = "kk") +
  geom_edge_link() +
  geom_node_point(size = 8, colour = 'steelblue') +
  geom_node_label(aes(label = name),
                 repel = TRUE)
```

&lt;img src="network_course_part02_files/figure-html/unnamed-chunk-24-1.png" width="55%" /&gt;


---
ì´ì œ ì–´ì œ ì˜ˆê³ í•œ "strongly connected component"ë¥¼ ì‹œê°í™” í•´ë´…ë‹ˆë‹¤. í´ëŸ¬ìŠ¤í„°/ì§‘ë‹¨ì— ì˜ì—­ì„ ì¹ í•´ì£¼ëŠ” ë°©ë²•, í•œê¸€ì²˜ë¦¬ ë“±ì„ ë°°ìš°ê²Œ ë©ë‹ˆë‹¤. 


```r
my_scc &lt;- tbl_graph(edges =
                   data.frame(
                     from = c("a", "b", "b", "b",
                              "c", "c",
                              "d", "d",
                              "e", "e",
                              "f", "g", "h", "h"),
                     to = c("b", "c", "e", "f",
                            "g", "d",
                            "c", "h",
                            "a", "f",
                            "g", "f", "d", "g")),
                 directed = TRUE)
```
---
ì¼ë‹¨ ê·¸ë˜í”„ ëª¨ì–‘ì„ ë´…ë‹ˆë‹¤. 


```r
plot(my_scc)
```

![](network_course_part02_files/figure-html/unnamed-chunk-26-1.png)&lt;!-- --&gt;
---
ì´ê²ƒì€ ì›ë˜ ì´ë ‡ê²Œ ìƒê¸´ Strongly Connected Componentì˜ ì‚¬ë¡€ë¡œ ìì£¼ ë³´ëŠ” ê·¸ë˜í”„ì…ë‹ˆë‹¤. 

![scale: 100%](pic/Scc.png)

ì´ê²ƒì„ ggraphë¡œ êµ¬í˜„í•´ë³´ê² ìŠµë‹ˆë‹¤. 


```r
# ì»´í¬ë„ŒíŠ¸ë¥¼ ì°¾ì•„ ê·¸ë£¹ìœ¼ë¡œ ì§€ì •í•©ë‹ˆë‹¤. 
my_scc &lt;-
  my_scc %N&gt;%
  mutate(group = group_components(type = "strong"))
```

```r
# ìˆ˜ë™ìœ¼ë¡œ ë ˆì´ì•„ì›ƒ ì¢Œí‘œë„ ë½‘ì•„ ë†“ìŠµë‹ˆë‹¤. (í•„ìˆ˜ëŠ” ì•„ë‹™ë‹ˆë‹¤)
my_layout &lt;- create_layout(my_scc, layout = "fr")
```
---

```r
library(ggforce)
library(concaveman)
```

```r
# ì˜ì—­í‘œì‹œ í•¨ìˆ˜ì¸ geom_mark_hullì˜ labelë¡œ ì“¸ ë³€ìˆ˜ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤. 
my_scc &lt;- my_scc %N&gt;%
  mutate(desc = c("ê·¸ë£¹1", "ê·¸ë£¹2", "ê·¸ë£¹3")[group])
```

```r
# ìì‹ ì´ ì›í•˜ëŠ” í°íŠ¸ë¥¼ ì‚¬ìš©í•˜ëŠ” ê°€ì¥ ì „í˜•ì ì¸ ë°©ë²•ì…ë‹ˆë‹¤. 
library(extrafont)
font_import(pattern = 'NanumBarun') # ì½˜ì†”ì°½ì—ì„œ Yë¡œ ë‹µí•©ë‹ˆë‹¤.
# loadfonts(device = "win")
```


---

```r
p &lt;- ggraph(my_scc, layout = "manual",
       x = my_layout$x,
       y = my_layout$y) +
  geom_edge_fan(arrow = arrow(angle = 20,
                               length = unit(2, "mm"),
                               ends = "last",
                               type = "closed"),
                 start_cap = circle(3.2, 'mm'),
                 end_cap  = circle(3.2, 'mm')) +
  geom_node_point(aes(fill = factor(group),
                      colour = factor(group)), size = 8) +
  geom_mark_hull(
    aes(x, y, group = factor(group),
        fill = factor(group), label = factor(desc)),
    concavity = 4,
    expand = unit(6, "mm"),
    alpha = 0.25,
    colour = NA,
    label.family = "NanumBarunGothic"
  ) + 
   geom_node_text(aes(label = name),
                 vjust = 0.5,
                 colour = 'white') + 
   scale_fill_manual(breaks = 1:3,
                   labels = c("ê·¸ë£¹1", "ê·¸ë£¹2", "ê·¸ë£¹3"),
                   values = palette("Set1"),
                   name = "ê°•í•œ ì»´í¬ë„ŒíŠ¸") 
```
---

```r
p &lt;- p + 
  scale_color_manual(breaks = 1:3,
                   labels = c("ê·¸ë£¹1", "ê·¸ë£¹2", "ê·¸ë£¹3"),
                   values = palette("Set1"),
                   name = "ê°•í•œ ì»´í¬ë„ŒíŠ¸") +
  theme(legend.title = element_text(size = 10, family = "NanumBarunGothic"),
        legend.text = element_text(size = 9.5, family = "NanumBarunGothic"),
        legend.position = "bottom")
p
```

&lt;img src="network_course_part02_files/figure-html/unnamed-chunk-33-1.png" width="55%" /&gt;
---
#### ê·¸ë˜í”„ì˜ ê³ í•´ìƒë„ ì¶œë ¥


```r
# ì´ëŸ° ì‹ìœ¼ë¡œ ë³¸ì¸ì´ ì›í•˜ëŠ” í¬ê¸°ì™€ í•´ìƒë„ë¥¼ ì…ë ¥í•˜ë©´ ë©ë‹ˆë‹¤. 
ggsave(plot = p, filename = "strong_component.png",
       units = "in", width = 12, height = 8,    dpi = 600)   
```
í•œê¸€ì—ì„œ pngì˜ dpiëŠ” 600ê¹Œì§€ í•œê³„ì¸ ë“¯ í•©ë‹ˆë‹¤. ê·¸ ì´ìƒì˜ ê³ í•´ìƒë„ pngíŒŒì¼ì€ í‘œì‹œê°€ ì•ˆë©ë‹ˆë‹¤. 

![:scale 80%](pic/strong_component.png)
---
ê·¸ë˜í”„ì— ëŒ€í•œ ì¡°ì‘ì„ ì¡°ê¸ˆ ë” ë“¤ì–´ê°€ë´…ë‹ˆë‹¤. ê³„ì† ì–¸ê¸‰í•˜ë˜ morphì…ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ ì•ì„œ ì‘ì—…í–ˆë˜ Zachary's karate ë°ì´í„°ì— ëŒ€í•´ ì„ì˜ë¡œ edgeì— ê°€ì¤‘ì¹˜ë¥¼ ë¶€ì—¬í•©ë‹ˆë‹¤. &lt;br&gt;


```r
zachary &lt;- create_notable("zachary")
zachary &lt;- zachary %&gt;% 
  activate(edges) %&gt;% 
  mutate(weight = sample(seq(0.1, 1.0, 0.1), 78, replace = TRUE))
zachary %E&gt;%
  filter(weight &gt;=0.5)  
```

```
## # A tbl_graph: 34 nodes and 37 edges
## #
## # An undirected simple graph with 8 components
## #
## # Edge Data: 37 x 3 (active)
##    from    to weight
##   &lt;int&gt; &lt;int&gt;  &lt;dbl&gt;
## 1     1     3    1  
## 2     1     8    0.8
## 3     1    11    0.6
## 4     1    18    0.9
## 5     1    20    1  
## 6     1    22    0.6
## # â€¦ with 31 more rows
## #
## # Node Data: 34 x 0
```

```r
zachary %E&gt;%
  filter(weight &gt;=0.9) # ëª‡ ê°œ ì¸ì§€ í™•ì¸í•˜ë ¤ê³  í•œ ê²ë‹ˆë‹¤. 
```

```
## # A tbl_graph: 34 nodes and 15 edges
## #
## # An unrooted forest with 19 trees
## #
## # Edge Data: 15 x 3 (active)
##    from    to weight
##   &lt;int&gt; &lt;int&gt;  &lt;dbl&gt;
## 1     1     3    1  
## 2     1    18    0.9
## 3     1    20    1  
## 4     2    18    0.9
## 5     2    22    0.9
## 6     3     8    0.9
## # â€¦ with 9 more rows
## #
## # Node Data: 34 x 0
```

```r
zachary &lt;- zachary %N&gt;% 
  mutate(index = 1:graph_order()) # ì¸ë±ìŠ¤ë¥¼ ë¶™ì—¬ì¤ë‹ˆë‹¤. 
```

---
ì›í•˜ëŠ” ê²ƒì€ edgeì˜ weightê°€ 0.9 ì´ìƒì¸ ë…¸ë“œë¥¼ ì°¾ì•„ì„œ strongì´ë¼ëŠ” ë…¸ë“œ ì†ì„±ì— ì²´í¬ë¥¼ í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. 

```r
# ë…¸ë“œ activateì—ì„œ ì—£ì§€ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ê²ƒì€ .E(), ë°˜ëŒ€ë¡œ ì—£ì§€ ì‘ì—… ì¤‘ì— ë…¸ë“œë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ê²ƒì€ .N()ì…ë‹ˆë‹¤. 
# ì´ë¥¼ ì´ìš©í•´ to_subgraph í•¨ìˆ˜ì— í•„í„°ë§ ì¡°ê±´ì„ ê±¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. 
zachary &lt;- zachary %N&gt;%
  morph(to_subgraph, ((index %in% .E()[.E()$weight &gt;= 0.9,]$from) |
           (index %in% .E()[.E()$weight &gt;= 0.9,]$to)), 
           subset_by = "nodes") %N&gt;% 
  mutate(strong = 1) %&gt;% unmorph()
zachary
```

```
## # A tbl_graph: 34 nodes and 78 edges
## #
## # An undirected simple graph with 1 component
## #
## # Node Data: 34 x 2 (active)
##   index strong
##   &lt;int&gt;  &lt;dbl&gt;
## 1     1      1
## 2     2      1
## 3     3      1
## 4     4     NA
## 5     5     NA
## 6     6      1
## # â€¦ with 28 more rows
## #
## # Edge Data: 78 x 3
##    from    to weight
##   &lt;int&gt; &lt;int&gt;  &lt;dbl&gt;
## 1     1     2    0.2
## 2     1     3    1  
## 3     1     4    0.1
## # â€¦ with 75 more rows
```

---
ë°©ê¸ˆ ì „ì— ë§Œë“  strong ì†ì„±ì„ ì •ë¦¬í•©ë‹ˆë‹¤. strongì— 1ì´ ë¶€ì—¬ë˜ì§€ ì•Šì€ ê²ƒì€ NAë¡œ ë˜ì–´ ìˆìœ¼ë‹ˆ ì´ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ 0ìœ¼ë¡œ ë§Œë“­ë‹ˆë‹¤. 

```r
zachary &lt;- zachary %N&gt;%
  mutate(strong = ifelse(is.na(strong), 0, 1))
zachary &lt;- zachary %E&gt;%
  mutate(strong = ifelse(weight &gt;=0.9, 1, 0))
zachary &lt;- zachary %N&gt;%
  mutate(group = group_infomap()) # í´ëŸ¬ìŠ¤í„°ë§ë„ í•©ë‹ˆë‹¤. 
```

---
ì§€ê¸ˆê¹Œì§€ í–ˆë˜ ê²ƒë“¤ì„ ëª¨ì•„ ê·¸ë˜í”„ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. 

```r
p &lt;- ggraph(zachary, layout = "stress") +
  geom_edge_link(aes(alpha = strong, width = factor(strong),
                 color = factor(strong)), alpha = 0.5) +
  geom_node_point(aes(alpha = strong, colour = factor(group)), size = 8) +
  geom_node_text(aes(label = index, alpha = strong), vjust = 0.5, 
                 color = "white") +
  scale_alpha_continuous(range = c(0.2,1)) +
  scale_colour_discrete(name = "group") +
  scale_edge_width_discrete(name = "over 0.9 weight", breaks = c(0,1), 
                            range = c(0.5,2), label = c("FALSE", "TRUE")) +
  scale_edge_color_manual(name = "over 0.9 weight", breaks = c(0,1), 
                          values = c("grey", "blue"), label = c("FALSE", "TRUE")) +
  guides(alpha = FALSE)
```
---
![](network_course_part02_files/figure-html/unnamed-chunk-39-1.png)&lt;!-- --&gt;
---
ì´ì œ ì¡°ê¸ˆ ë” ì‹¤ì „ ë°ì´í„°ë¡œ ë“¤ì–´ê°€ê² ìŠµë‹ˆë‹¤.&lt;br&gt; 
ì´ì œë¶€í„° ì‚¬ìš©í•˜ëŠ” ë°ì´í„°ëŠ” [êµ¬ê¸€ ë“œë¼ì´ë¸Œ](https://drive.google.com/drive/folders/1DolWgQgrNbh5wk0x5cZEGepsKtD_836y?usp=sharing)ì— ë“¤ì–´ê°€ì…”ì„œ ë°›ìœ¼ì‹œë©´ ë©ë‹ˆë‹¤.&lt;br&gt;

ë¨¼ì € í”„ë‘ìŠ¤ë¡œ ê¸°ì°¨ì—¬í–‰ì„ ë– ë‚˜ê² ìŠµë‹ˆë‹¤. 

```r
library(data.table)
small_trains &lt;- fread("small_trains.csv")
```

```r
# ì¶œë°œì—­ê³¼ ë„ì°©ì—­ì˜ ì¡°í•©ì„ ê¸°ì¤€ìœ¼ë¡œ í‰ê·  ì—¬í–‰ì‹œê°„ì„ ê³„ì‚°í•©ë‹ˆë‹¤.  
library(dplyr)
routes &lt;- small_trains %&gt;%
  group_by(departure_station, arrival_station) %&gt;%
  summarise(journey_time = mean(journey_time_avg)) %&gt;%
  ungroup() %&gt;%
  mutate(from = departure_station, 
         to = arrival_station) %&gt;%
  select(from, to, journey_time)
# ì´ì œëŠ” ìµìˆ™í•œ edge ë°ì´í„°í”„ë ˆì„ì„ ë§Œë“¤ê³  
graph_routes &lt;- as_tbl_graph(routes)
library(stringr)
# ì—­ ì´ë¦„ì„ ë‹¤ë“¬ì–´ ì¤ë‹ˆë‹¤.
graph_routes &lt;- graph_routes %&gt;%
  activate(nodes) %&gt;%
  mutate(
    title = str_to_title(name),
    label = str_replace_all(title, " ", "\n"))
```
---
í•˜ë ¤ê³  í•˜ëŠ” ì‘ì—…ì€ ë‘ê°œì˜ ì—­ì„ ì •í•˜ë©´ ì—­ ê°„ì˜ ìµœë‹¨ ê±°ë¦¬ë¥¼ ê·¸ë˜í”„ ìƒì—ì„œ í‘œì‹œí•˜ëŠ” ê²ë‹ˆë‹¤. 

```r
# ë°”ë¡œ ë’¤ì— ì“°ì´ê²Œ ë  ì—­ëª…ì„ ë²¡í„°ë¡œ ë”°ë¡œ ì €ì¥í•´ ë†“ìŠµë‹ˆë‹¤. 
stations &lt;- graph_routes %&gt;%  activate(nodes) %&gt;%
  pull(title)
# ì§€ê¸ˆê¹Œì§€ ìƒì„±í•œ ë°ì´í„°ë¡œ ê°„ëµíˆ ê·¸ë ¤ë´…ë‹ˆë‹¤. 
graph_routes %&gt;%
  ggraph(layout = "kk") +
    geom_node_point() +
    geom_edge_diagonal() # ê³¡ì„ í™” 
```

&lt;img src="network_course_part02_files/figure-html/unnamed-chunk-42-1.png" width="55%" /&gt;
---
ì§€ê¸ˆê¹Œì§€ ë°°ìš´ ì‹¤ë ¥ì„ ë™ì›í•˜ë©´ ì•„ë˜ì™€ ê°™ì€ ì¥ì‹ì€ ì‰¬ìš´ ì¼ì…ë‹ˆë‹¤. 

```r
graph_routes %&gt;%
  ggraph(layout = "kk") +
    geom_node_text(aes(label = label, color = name), size = 3) +
    geom_edge_diagonal(color = "gray", alpha = 0.4) +
  guides(color = FALSE)
```

&lt;img src="network_course_part02_files/figure-html/unnamed-chunk-43-1.png" width="60%" /&gt;
---

```r
# ì„ íƒí•œ ë‘ ì—­ì— ëŒ€í•´ ê°•ì¡°í–ˆë˜ ì¸ë±ì‹± ë²ˆí˜¸ë¥¼ ë½‘ì•„ ë†“ìŠµë‹ˆë‹¤. 
from &lt;- which(stations == "Arras")
to &lt;-  which(stations == "Nancy")

# ê°€ì¥ í•µì‹¬ì…ë‹ˆë‹¤. 
shortest &lt;- graph_routes %&gt;%
  morph(to_shortest_path, from, to, weights = journey_time)
# morphì— ìµœë‹¨ ê±°ë¦¬ í•¨ìˆ˜ë¥¼ ì ìš©í•©ë‹ˆë‹¤. 
# ì¼ë‹¨ ì´ê²ƒì„ shortestì— ì €ì¥í•´ë†“ìŠµë‹ˆë‹¤. morphëœ ìƒíƒœì…ë‹ˆë‹¤. 

# morph ìƒíƒœì—ì„œ ì‘ì—…í•œ ë…¸ë“œì™€ ì—£ì§€ë¥¼ ì²´í¬í•©ë‹ˆë‹¤. 
shortest &lt;- shortest %&gt;%
  mutate(selected_node = TRUE) %&gt;%
  activate(edges) %&gt;%
  mutate(selected_edge = TRUE) %&gt;%
  unmorph()

# ì•ì—ì„œë„ ë´¤ë“¯ì´ ì´ë ‡ê²Œ í•˜ë©´ ë‚˜ë¨¸ì§€ëŠ” NAì´ë¯€ë¡œ, í•œë²ˆ ë” ì‘ì—…í•´ì¤ë‹ˆë‹¤.  
shortest &lt;- shortest %&gt;%
  activate(nodes) %&gt;%
  mutate(selected_node = ifelse(is.na(selected_node), 1, 2)) %&gt;%
  activate(edges) %&gt;%
  mutate(selected_edge = ifelse(is.na(selected_edge), 1, 2)) %&gt;%
  arrange(selected_edge)
```
---
ì´ì œ ê·¸ë˜í”„ì— í‘œì‹œí•©ë‹ˆë‹¤. íˆ¬ëª…ë„ alphaë¥¼ ì‚¬ìš©í•˜ì—¬ êµ¬ë¶„ì„ ì¤ë‹ˆë‹¤.  

```r
shortest %&gt;%
  ggraph(layout = "kk") +
    geom_edge_diagonal(aes(alpha = selected_edge), color = "gray") +
    geom_node_text(aes(label = label, color =name, alpha = selected_node ), size = 3) + theme(legend.position = "none") +
  scale_alpha_continuous(range = c(0.2,1))
```

&lt;img src="network_course_part02_files/figure-html/unnamed-chunk-45-1.png" width="55%" /&gt;
---
ì œë²• ë©‹ì§€ê²Œ ë‚˜ì™”ìŠµë‹ˆë‹¤. ë‹¤ë¥¸ ì—­ë“¤ì´ ë„ˆë¬´ ì•ˆë³´ì´ë‹ˆ íˆ¬ëª…ë„ ì•ŒíŒŒì— ëŒ€í•œ ìŠ¤ì¼€ì¼ ë²”ìœ„ë¥¼ ì¢€ ì¢íˆê³ , ê²½ë¡œì˜ ë‘ê»˜ë¥¼ ì¢€ ë” ì¤ë‹ˆë‹¤. 

```r
shortest %&gt;% ggraph(layout = "kk") +
    geom_edge_diagonal(aes(alpha = selected_edge,
                           width = selected_edge), color = "gray") +
    geom_node_text(aes(label = label, color =name, alpha = selected_node ), size = 3) + theme(legend.position = "none") +
  scale_alpha_continuous(range = c(0.4, 1)) +
  scale_edge_width_continuous(range = c(0.4,2))
```

&lt;img src="network_course_part02_files/figure-html/unnamed-chunk-46-1.png" width="50%" /&gt;

---
ì´ ì‘ì—…ì„ ìˆ˜ë„ê¶Œ ì „ì² ì—ì„œë„ í•´ë´…ë‹ˆë‹¤. 


```r
subway &lt;- fread("subway.csv", encoding = "UTF-8")
subway &lt;- as_tbl_graph(subway)
subway &lt;- subway %&gt;% activate(nodes) %&gt;%  
  mutate(index = 1:graph_order())

# ì—­ì´ë¦„ì„ ë²¡í„°ë¡œ ì¶”ì¶œí•´ ë†“ìŠµë‹ˆë‹¤.
station_vec &lt;- as_tibble(subway, "nodes")$name

# ë¶ˆê´‘ì—ì„œ ì˜¤ì´ë„ê¹Œì§€ ê°€ëŠ” ìµœë‹¨ê²½ë¡œë¥¼ í‘œì‹œ 
shortest &lt;- subway %E&gt;% 
  morph(to_shortest_path, from = which(station_vec == "ë¶ˆê´‘"),
        to = which(station_vec == "ì˜¤ì´ë„"))
shortest &lt;- shortest %N&gt;% 
  mutate(my_shortest = TRUE) %E&gt;% 
  mutate(my_shortest = TRUE) %&gt;% unmorph()
shortest &lt;- shortest %N&gt;%
  mutate(my_shortest = ifelse(is.na(my_shortest), 1, 2)) %E&gt;% 
  mutate(my_shortest = ifelse(is.na(my_shortest), 1, 2))
```
---
ë¶ˆê´‘ - ì˜¤ì´ë„ ìµœë‹¨ ê²½ë¡œë¥¼ í‘œì‹œí•©ë‹ˆë‹¤. 


```r
ggraph(shortest, layout = "stress") +
  geom_edge_link(aes(color = line, alpha  = my_shortest,
                     width = my_shortest)) +
  geom_node_point(aes(alpha = my_shortest)) +
  geom_node_text(aes(label = name, filter = (my_shortest==2), 
                     alpha = my_shortest), size = 3, repel = TRUE, 
                 family = "NanumBarunGothic") +
  theme(legend.position = "none") + 
  scale_alpha_continuous(range = c(0.2, 1)) +
  scale_edge_width_continuous(range = c(0.4,2))
```

&lt;img src="network_course_part02_files/figure-html/unnamed-chunk-48-1.png" width="60%" /&gt;
---
## stack overflow ë„¤íŠ¸ì›Œí¬ 


```r
# ë…¸ë“œì™€ ì—£ì§€ ëª¨ë‘ ì˜ ì •ë¦¬í•´ ë†“ì€ ê²ƒì„ ë¶ˆëŸ¬ë“¤ì…ë‹ˆë‹¤. 
stack_network &lt;- tbl_graph(nodes = fread("stack_network_nodes.csv"),
                           edges = fread("stack_network_links.csv"), 
                           directed = FALSE)

# í™•ì¸í•´ë´…ë‹ˆë‹¤. 
stack_network
```

```
## # A tbl_graph: 115 nodes and 490 edges
## #
## # An undirected multigraph with 6 components
## #
## # Node Data: 115 x 3 (active)
##   name          group nodesize
##   &lt;chr&gt;         &lt;int&gt;    &lt;dbl&gt;
## 1 html              6    272. 
## 2 css               6    341. 
## 3 hibernate         8     29.8
## 4 spring            8     52.8
## 5 ruby              3     70.1
## 6 ruby-on-rails     3     55.3
## # â€¦ with 109 more rows
## #
## # Edge Data: 490 x 3
##    from    to value
##   &lt;int&gt; &lt;int&gt; &lt;dbl&gt;
## 1    22   105  20.9
## 2    22    29  32.3
## 3    12    22  48.4
## # â€¦ with 487 more rows
```
---
ì–´ì œ ë³´ì•˜ë˜ ê·¸ ë„¤íŠ¸ì›Œí¬ì…ë‹ˆë‹¤. 


```r
set.seed(2017)
ggraph(stack_network, layout = "fr") +
    geom_edge_link(alpha = 0.2, aes(width = value)) +
    geom_node_point(aes(color = as.factor(group), size = 10 * nodesize)) +
    geom_node_text(aes(label = name), repel = TRUE) +
    theme_graph(base_family = "NanumBarunGothic") +
    theme(plot.title = element_text(family="NanumBarunGothic"),
          legend.position="none") +
    labs(title = "Stack Overflow Tag Network",
         subtitle = "Tags correlated on Developer Stories")
```

&lt;img src="network_course_part02_files/figure-html/unnamed-chunk-50-1.png" width="45%" /&gt;
---
class: inverse, middle, center

### ì´ì œ ì§„ì§œ ì‹¤ì „ë¬¸ì œë¡œ
### Web of Scienceì—
### ë„ì „í•˜ê² ìŠµë‹ˆë‹¤.
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script src="macros.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
