<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>R í™œìš© ì„œì§€ë°ì´í„° ë„¤íŠ¸ì›Œí¬ ë¶„ì„ ë° ì‹œê°í™”</title>
    <meta charset="utf-8" />
    <meta name="author" content="ì´ì¤€ì˜" />
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link rel="stylesheet" href="css/my_hangul.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# R í™œìš© ì„œì§€ë°ì´í„°<br>ë„¤íŠ¸ì›Œí¬ ë¶„ì„ ë° ì‹œê°í™”
## ğŸŒŒ
### ì´ì¤€ì˜
### KISTI, ë¯¸ë˜ê¸°ìˆ ë¶„ì„ì„¼í„°
### 2020ë…„ 5ì›” 26-27ì¼

---

background-position: 50% 50%
class: center, bottom
background-image: url("/pic/unnamed-chunk-1-1.png")
background-size: 85%

#### &lt;font color = "steelblue"&gt;COOL!&lt;/font&gt; 

???

Image credit: [Stack Overflow Tag Network](https://juliasilge.com/blog/tag-network/)

---
class: left, top

## ê°•ì˜ë¥¼ ë“£ê³  ë‚˜ë©´  


1) ì´ë¯¸ ë§Œë“¤ì–´ ë†“ì€ 'ë„¤íŠ¸ì›Œí¬' ë°ì´í„°ë¥¼ ì´ìš©í•˜ëŠ” ê²ƒì—ì„œ ë²—ì–´ë‚˜, **ë„¤íŠ¸ì›Œí¬ ë¶„ì„ì— 
ì í•©í•œ í˜•íƒœì˜ ë°ì´í„°**ë¥¼ ì§ì ‘ ìƒì„±í•´ë‚¼ ìˆ˜ ìˆë‹¤.
 

2) Point &amp; Click ë°©ì‹ì˜ ë„¤íŠ¸ì›Œí¬ ë¶„ì„ë„êµ¬(Gephi, Pajek, Ucinet ë“±)ì— ëŒ€í•œ ì˜ì¡´ì—ì„œ ë²—ì–´ë‚˜, í”„ë¡œê·¸ë˜ë° ë°©ì‹ì— ì˜í•´ **ë¶„ì„ì˜ ììœ ë„**ë¥¼ ë†’ì¼ ìˆ˜ ìˆë‹¤. 

![:scale 150%](/pic/data-science-explore.png)

3) ë„¤íŠ¸ì›Œí¬ ë¶„ì„ê³¼ ë‹¤ë¥¸ ë°ì´í„° ë¶„ì„ í”„ë¡œì„¸ìŠ¤ ê°„ì˜ ì¥ë²½ì„ í—ˆë¬¼ê³ , tidygraph, ggraph ë“± ë„¤íŠ¸ì›Œí¬ ë¶„ì„ ê´€ë ¨ Rì˜ ìµœì‹  íŒ¨í‚¤ì§€ë¥¼ í™œìš©í•˜ì—¬ **í†µí•© í”„ë ˆì„**ì—ì„œ ì§„í–‰í•  ìˆ˜ ìˆê²Œ ëœë‹¤.  
 
---
### ë¶„ì„ í™˜ê²½ ì¤€ë¹„ 

* [R Ver.4.0 base](https://cloud.r-project.org/)
* [RStudio](https://rstudio.com/products/rstudio/download/)
* [Rtools](https://cloud.r-project.org/) : ìœˆë„ìš°(64bit/32bit)ì— ë”°ë¥¸ ë²„ì „ ì—°ë™
* Rtoolsë¥¼ ê¹”ê³  ë‚˜ì„œ Rstudioì—ì„œ ì•„ë˜ ëª…ë ¹ ì‹¤í–‰  

```r
writeLines('PATH="${RTOOLS40_HOME}\\usr\\bin;${PATH}"', con = "~/.Renviron")
```
* 4.0ì´ì „ì˜ R ë²„ì „ì´ ê¹”ë ¤ ìˆì—ˆë‹¤ë©´, ì•„ë˜ ëª…ë ¹ ì‹¤í–‰ 

```r
update.packages(ask=FALSE, checkBuilt=TRUE)
```
* ì¼ë‹¨ ê¹”ì•„ì•¼ í•  íŒ¨í‚¤ì§€ 

```r
install.packages(c("tidyverse", "data.table", "ggraph", "tidygraph", "gapminder",
                   "Matrix", "tidytext", "text2vec"))
```
---
class: inverse, center, middle

## ë„¤íŠ¸ì›Œí¬ ë¶„ì„ì€&lt;br&gt;
## ì–´ë–¤ ì ì—ì„œ&lt;br&gt;
## íŠ¹ë³„í•œê°€? 

---

## í…Œì´ë¸” ë°ì´í„° VS ë„¤íŠ¸ì›Œí¬ ë°ì´í„° 

**ì „í†µì ì¸** í…Œì´ë¸” í˜•íƒœì˜ 'ê¹”ë”í•œ' ë°ì´í„°
&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt;   &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; mpg &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; cyl &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; disp &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; hp &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; drat &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; wt &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; qsec &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; vs &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; am &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; gear &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; carb &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Mazda RX4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 21.0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 6 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 160 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 110 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3.90 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2.620 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 16.46 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Mazda RX4 Wag &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 21.0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 6 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 160 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 110 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3.90 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2.875 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 17.02 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Datsun 710 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 22.8 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 108 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 93 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3.85 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2.320 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 18.61 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Hornet 4 Drive &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 21.4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 6 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 258 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 110 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3.08 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3.215 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 19.44 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Hornet Sportabout &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 18.7 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 360 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 175 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3.15 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3.440 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 17.02 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Valiant &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 18.1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 6 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 225 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 105 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2.76 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3.460 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 20.22 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
- í–‰ = ë¶„ì„ ëŒ€ìƒ ê´€ì¸¡ì¹˜/ê´€ì¸¡ ê°œì²´(**observations**), 

- ì—´ = ëŒ€ìƒì— ëŒ€í•œ ë³€ìˆ˜ë“¤(**variables/features**) 

ê·¸ëŸ¬ë‚˜, ë„¤íŠ¸ì›Œí¬ ë°ì´í„°ëŠ” ì´ëŸ¬í•œ ê´€ì¸¡ ê°œì²´ì˜ íŠ¹ì„±ì„ ì •ë¦¬í•œ 'í…Œì´ë¸”' í˜•íƒœë„ í¬í•¨í•˜ì§€ë§Œ, ê´€ì¸¡ ê°œì²´ ê°„ì˜ **ì—°ê²°(link)**ì— ëŒ€í•œ ì •ë³´ê°€ í•µì‹¬ 

- ì´ ì •ë³´ë¥¼ ì–´ë–»ê²Œ **ë°ì´í„°**ì— ë‹´ê³ , ë‹´ì•„ë‚¸ ë°ì´í„°ë¥¼ **ì–´ë– í•œ ë°©ì‹**ìœ¼ë¡œ êº¼ë‚´ì–´ í™œìš©í•  ìˆ˜ ìˆì„ê¹Œ? (ğŸŒŸê°•ì˜ì˜ í•µì‹¬) 


---
## ë„¤íŠ¸ì›Œí¬ ë°ì´í„°ì˜ êµ¬ì¡° 

- ê°œì²´(nodes, vertices) + ë…¸ë“œ ê°„ ì—°ê²°(edges, links, ties) 

- ê·¸ë¦¬ê³  nodeì™€ edge ê°ê°ì— ëŒ€í•´ ë¶€ì—¬ëœ ë‹¤ì–‘í•œ ì†ì„±(attributes)
![:scale 90%](/pic/network_data_scheme01.png)

---
## ë„¤íŠ¸ì›Œí¬ ë°ì´í„°ì˜ ë¶„í•´ 
- node, edgeì˜ ì†ì„±ë“¤ì€ ë„¤íŠ¸ì›Œí¬ì— ë…ë¦½ì ì¸ ê²ƒ(ì†Œì† ì§‘ë‹¨, ì  ë”, ë…„ë„ ë“±) + ë„¤íŠ¸ì›Œí¬ì—ì„œ ì¶”ì¶œëœ ê²ƒ (í´ëŸ¬ìŠ¤í„°ë§ ê²°ê³¼ ì§‘ë‹¨, ì¤‘ì•™ì„± ë“±)ìœ¼ë¡œ êµ¬ë¶„  

  ![:scale 62%](/pic/network_data_scheme02.png)
---
## ë„¤íŠ¸ì›Œí¬ ë°ì´í„°ì˜ ì¬ê²°í•©  

- ë…¸ë“œ + ë…¸ë“œ ì†ì„±, ì—ì§€ + ì—ì§€ ì†ì„±ì„ ê°ê° **ë°ì´í„° í”„ë ˆì„** í˜•íƒœë¡œ í‘œí˜„ 

- ë…¸ë“œ, ì—ì§€ ê° ë‘ ê°€ì§€ ë°ì´í„°ë¥¼ ê²°í•©í•˜ì—¬ **ë„¤íŠ¸ì›Œí¬ ë°ì´í„°** 'object'ë¡œ ê´€ë¦¬   
   ![:scale 85%](/pic/network_data_scheme03.png)

---

## ìš©ì–´ ì •ë¦¬ 

* ê·¸ë˜í”„ **G = (V, E)**ëŠ”  nodes(ë˜ëŠ” vertices)ì˜ ì§‘í•©ê³¼ í•´ë‹¹ ë…¸ë“œë“¤ ê°„ì˜ edges(ë˜ëŠ” links, ties)ì˜ ì§‘í•©ì„ ì˜ë¯¸í•¨. 'ë„¤íŠ¸ì›Œí¬'ì™€ í˜¼ìš©. 

* ê·¸ë˜í”„ì—ì„œ edgesëŠ” **ë°©í–¥ì„±**ì´ ìˆì„ ìˆ˜ë„(directed), ë°©í–¥ì„±ì´ ì—†ì„ ìˆ˜ë„(undirected) ìˆìŒ. ì—°ê²° ê´€ê³„ê°€ ìƒí˜¸ì ì¸ì§€, ì¼ë°©ì„±ì„ ê°–ëŠ”ì§€ì— ë”°ë¥¸ ì°¨ì´ì„. 

* Edgesë‚˜ nodesì—ëŠ” ì—¬ëŸ¬ ë‹¤ì–‘í•œ ë§¥ë½ì— ë”°ë¼ ì¸¡ì •ê°€ëŠ¥í•œ **ê°€ì¤‘ì¹˜**(weight)ê°€ ë¶€ì—¬ë  ìˆ˜ ìˆìŒ.

* **ê²½ë¡œ(path)**ëŠ” ë‘ node ê°„ì˜ ì—°ì†ì ì¸ edgeì˜ ë°°ì—´ì„. edgeì˜ ë°°ì—´ì—ì„œ í•´ë‹¹ ë…¸ë“œë¥¼ í†µê³¼í•˜ëŠ” ê²ƒì€ ì œì™¸í•¨. í•´ë‹¹ ë…¸ë“œê°€ í¬í•¨ë˜ëŠ” ê²½ë¡œëŠ” **walk**ë¼ê³  í•¨. ë‘ ë…¸ë“œ ì‚¬ì´ì—ëŠ” ê²½ë¡œê°€ ì¡´ì¬í•˜ì§€ ì•Šì„ ìˆ˜ë„ ìˆìœ¼ë©°, ìµœë‹¨ ê²½ë¡œ(shortest path)ëŠ” í•˜ë‚˜ ì´ìƒ ì¡´ì¬í•˜ë©°, ì´ë¥¼ **geodesic**ì´ë¼ê³ ë„ í•¨. ìµœë‹¨ ê²½ë¡œ ê¸¸ì´ëŠ” ë…¸ë“œ ê°„ ê±°ë¦¬ì— ëŒ€í•œ ì •ì˜ì— ë”°ë¼ ë‹¤ë¥¼ ìˆ˜ ìˆìœ¼ë‚˜, ëŒ€ê°œëŠ” ê°€ì¤‘ì¹˜ë¥¼ ê³ ë ¤í•˜ì§€ ì•Šìœ¼ë©´ ê²½ë¡œì— í¬í•¨ëœ edgeì˜ ê°¯ìˆ˜ë¡œ, ê°€ì¤‘ì¹˜ë¥¼ ê³ ë ¤í•˜ë©´ edgeë“¤ì˜ ê°€ì¤‘ì¹˜ í•©ìœ¼ë¡œ í‘œì‹œí•¨. í•œ ê·¸ë˜í”„ì—ì„œ ëª¨ë“  ë…¸ë“œì˜ ìŒ(pair)ì— ëŒ€í•´ ê²½ë¡œê°€ ì¡´ì¬í•œë‹¤ë©´ **ì—°ê²°ë˜ì—ˆë‹¤(connected)**ê³  í•¨. 

* ë°©í–¥ì„±ì´ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê²½ìš°, ëª¨ë“  ë…¸ë“œì˜ ìŒì— ê²½ë¡œê°€ ì¡´ì¬í•˜ëŠ” ë…¸ë“¤ë“¤ì˜ ì§‘í•©ì„ **ì»´í¬ë„ŒíŠ¸(component)** ë¼ê³  í•¨. edgeì˜ ë°©í–¥ì„±ì´ ì¡´ì¬í•˜ê³ , ë°©í–¥ì„±ì„ ê³ ë ¤í•˜ì—¬ ëª¨ë“  ë…¸ë“œ ìŒë“¤ì˜ ê²½ë¡œê°€ ì¡´ì¬í•˜ëŠ” ê²½ìš°ë¥¼ **ê°•í•œ ì—°ê²° ì»´í¬ë„ŒíŠ¸(strongly connected component)**ë¼ê³  í•¨.

---

## ìš©ì–´ ì •ë¦¬

* ê·¸ë˜í”„ì˜ **ì§ê²½(diameter)**ì€ ê·¸ë˜í”„ì˜ ëª¨ë“  ë…¸ë“œ ìŒì˜ ìµœë‹¨ ê²½ë¡œ(geodesic) ì¤‘ì—ì„œ ê°€ì¥ ê¸´ ê²ƒì„ ê°€ë¦¬í‚´.  

* íŠ¹ì • nodeì˜ **í¸ì‹¬ê±°ë¦¬(eccentricity)**ëŠ” í•´ë‹¹ ë…¸ë“œì—ì„œ ì‹œì‘í•˜ëŠ” ê²½ë¡œ ì¤‘ ê°€ì¥ ê¸´ ìµœë‹¨ ê²½ë¡œì„. í¸ì‹¬ê±°ë¦¬ê°€ ë‚®ì€ ë…¸ë“œëŠ” ê·¸ë˜í”„ì—ì„œ ì¤‘ì‹¬ì  ìœ„ì¹˜ë¥¼ ì°¨ì§€í•˜ê²Œ ë¨. 

* v, wë¼ëŠ” ë‘ nodeë¡œ  êµ¬ì„±ëœ edge (v, w)ê°€ ì¡´ì¬í•˜ë©´ í•´ë‹¹ ë‘ ë…¸ë“œëŠ” **ì¸ì ‘(adjacent)**ë˜ì—ˆë‹¤ê³  í•˜ë©°, edgeëŠ” nodeì— ì—°ê²°(incident)ë˜ì—ˆë‹¤ê³  í•¨. 

* **ì—°ê²° ì •ë„ ì¤‘ì‹¬ì„±(degree centrality)**ì€ ê·¸ë˜í”„ì—ì„œ í•´ë‹¹ ë…¸ë“œì™€ ì¸ì ‘í•œ(incident) edgeì˜ ê°œìˆ˜ 

* **ë§¤ê°œ ì¤‘ì‹¬ì„±(betweenness centrality)**ì€ ì „ì²´ node ìŒì˜ ìµœë‹¨ ê²½ë¡œ(geodesic)ì˜ ê°€ì§“ ìˆ˜ì—ì„œ íŠ¹ì • ë…¸ë“œë¥¼ í†µê³¼í•˜ëŠ” ìµœë‹¨ ê²½ë¡œì˜ ê°€ì§“ìˆ˜ì˜ ë¹„ìœ¨ì„. ë„¤íŠ¸ì›Œí¬ì˜ ì „ì²´ íë¦„ì— ëŒ€í•œ í†µì œë¥¼ ì˜ë¯¸   

* **ì•„ì´ê²ë²¡í„° ì¤‘ì‹¬ì„±(eigenvector centrality)**ì€ í•´ë‹¹ nodeì— ì—°ê²°ëœ nodeë“¤ì˜ ì¤‘ì‹¬ì„±ë“¤ì˜ í•©ì„ ë°˜ë³µ ê³„ì‚°í•˜ì—¬ ìˆ˜ë ´ë˜ëŠ” ê°’ìœ¼ë¡œ, ë‹¨ìˆœíˆ 'ë§ì€ ì—°ê²°ê´€ê³„'ê°€ ì•„ë‹ˆë¼ ì˜ ì—°ê²°ëœ ë…¸ë“œì™€ì˜ ì—°ê²° ì •ë„ë¥¼ ë‚˜íƒ€ë‚´ì–´ 'ìœ„ì„¸(prestige)', 'ì§€ìœ„(prestige)'ë¥¼ ì˜ë¯¸

---

## Rì—ì„œ ë„¤íŠ¸ì›Œí¬ ë°ì´í„° ì²˜ë¦¬ì˜ ì—­ì‚¬

- 2000ë…„ëŒ€ ì´ˆë°˜ì— ë“±ì¥í•œ [sna](https://cran.r-project.org/web/packages/sna/index.html), 2000ë…„ëŒ€ ì¤‘ë°˜ì— ë“±ì¥í•œ  [igraph](https://igraph.org/r/)ëŠ” R ì§„ì˜ì—ì„œ ì‚¬íšŒì—°ê²°ë§ ë¶„ì„ì— ê°€ì¥ ë§ì´ í™œìš©ëœ íŒ¨í‚¤ì§€ 

- ê·¸ ì¤‘ì—ì„œë„ igraphê°€ ì²˜ë¦¬ ì†ë„, í¬ê´„ì„± ë“±ì—ì„œ ë” ìš°ì›”í•˜ì—¬ í•µì‹¬ì ì¸ ì§€ìœ„ë¥¼ ì°¨ì§€ 

- ê·¸ëŸ¬ë‚˜ 2017ë…„ í˜œì„±ğŸŒ ê³¼ ê°™ì´ ë“±ì¥í•œ [tidygraph](https://cran.r-project.org/web/packages/tidygraph/index.html), [ggraph](https://cran.r-project.org/web/packages/ggraph/index.html) íŒ¨í‚¤ì§€ëŠ” **tidyverse**ë¼ëŠ” Rstudio ì§„ì˜ì˜ ìƒˆë¡œìš´ R ìƒíƒœê³„ì˜ ë„¤íŠ¸ì›Œí¬'ë²„ì „'ì„ ì§€í–¥

- ì¦‰, ë„¤íŠ¸ì›Œí¬ ë¶„ì„ì„ tidyverseì˜ ì „ì²´ ë°ì´í„° ë¶„ì„ í”„ë ˆì„ì—ì„œ **seamless** í•˜ê²Œ ì—°ë™ ê°€ëŠ¥

- **tidygraph**ëŠ” igraphì˜ objectë¥¼ ìœ ì§€(= ì•„ë˜ì— igraphì˜ ì—”ì§„ + [netrankr](https://cran.r-project.org/web/packages/netrankr/index.html) ì´ë‚˜ [influenceR](https://cran.r-project.org/web/packages/influenceR/index.html)ê³¼ ê°™ì€ ìµœì‹  ë„¤íŠ¸ì›Œí¬ ë¶„ì„ì§€í‘œ íŒ¨í‚¤ì§€ë¥¼ í†µí•©í•˜ê³  tidyverseì˜ ë°ì´í„°ì²˜ë¦¬ íŒ¨í‚¤ì§€ [dplyr](https://dplyr.tidyverse.org/)ì˜ ë¬¸ë²•ì„ ê·¸ëŒ€ë¡œ ì ìš©ê°€ëŠ¥  

- **ggraph**ëŠ” ë°ì´í„° ì‹œê°í™”ì—ì„œ Rì˜ ì‚¬ì‹¤ìƒ í‘œì¤€ì¸ [ggplot2](https://ggplot2.tidyverse.org/)ì˜ ë¬¸ë²•ì„ ê·¸ëŒ€ë¡œ ì—°ë™ ê°€ëŠ¥ 

- ë„¤íŠ¸ì›Œí¬ ë°ì´í„° ì‹œê°í™” ê´€ë ¨í•œ ggplot2ì˜ í™•ì¥íŒ¨í‚¤ì§€ë¡œ [ggnetwork](https://cran.r-project.org/web/packages/ggnetwork/vignettes/ggnetwork.html)ì´ë‚˜  [ggnet](https://briatte.github.io/ggnet/) ë“±ë„ ì¡´ì¬í•˜ë‚˜ ì´ë²ˆ ê°•ì˜ì—ì„œëŠ” ggraphë¥¼ ì´ìš© 
 

---
### tidyverseì—ì„œ tidygraph, ggraphì˜ í†µí•© ì—°ë™

  ![scale: 80%](/pic/tidyverse_integrated.png)

---
## ì •ë¦¬ : ë°ì´í„°ì—ì„œ "tidy"ì˜ ì˜ë¯¸ 

 ì•ì—ì„œ ì–¸ê¸‰í–ˆë˜ **ì „í†µì ì¸ ê¹”ë”í•œ í…Œì´ë¸” í˜•íƒœ**ì˜ ë°ì´í„°ë¥¼ ì˜ë¯¸ì´ë©°, ì„¸ê°€ì§€ ì¡°ê±´ì„ ì¶©ì¡±
 
  - ê°ê°ì˜ ì—´(column)ì€ **ë³€ìˆ˜(variable)**ì´ë‹¤
  
  - ê°ê°ì˜ í–‰(row)ì€ **ê´€ì¸¡ì¹˜(observation)**ì´ë‹¤

  - ê°ê°ì˜ ì…€(cell)ì€ **ë‹¨ì¼í•œ ê°’**ì„ ê°–ëŠ”ë‹¤ 

![scale: 80%](/pic/tidy_data_way.png)

 ë„¤íŠ¸ì›Œí¬ ë°ì´í„°ì— ëŒ€í•´ tidy ì›ë¦¬ì˜ ì ìš©ì€ nodeì— ëŒ€í•´ì„œ, edge ì— ëŒ€í•´ì„œ **ë”°ë¡œ** ì ìš© 
   
  - nodeëŠ” ê¸°ì¡´ì˜ tidy ì›ë¦¬ì™€ ë™ì¼í•˜ê²Œ ì ìš©í•˜ë©°,  
   
  - edgeëŠ” nodeì™€ nodeì˜ ìŒ(pair)ì„ ê´€ì¸¡ì¹˜ë¡œ ë³´ê³ , ì´ì— ëŒ€í•´ tidy ì›ë¦¬ë¥¼ ì ìš©í•œë‹¤ëŠ” ê²ƒ     
---
### ë„¤íŠ¸ì›Œí¬ ë°ì´í„° ìƒì„±í•˜ê¸° : ê°„ë‹¨í•œ ëª¸í’€ê¸° 

nodeì™€ edge, directed/undirected ë¥¼ ê·¸ë˜í”„ í˜•íƒœë¡œ ê·¸ë¦¬ê¸° 

  ![:scale 65%](/pic/terminology_01.png)

nodeì™€ edgeì˜ ê´€ê³„ë¥¼ í–‰ë ¬(Matrix)ë¡œ ê·¸ë¦¬ê¸° 

  ![:scale 65%](/pic/terminology_02.png)

---
ìš°ì„  ë„¤íŠ¸ì›Œí¬ë¥¼ í–‰ë ¬ë¡œ í‘œí˜„í•´ ë³´ì. í–‰ê³¼ ì—´ì´ ë™ì¼í•œ undirected ê²½ìš°ì—ëŠ” ì•„ë˜ ë‘ ê²½ìš°ê°€ ë™ì¼ 
- full matrixì¸ ê²½ìš° ëŒ€ì¹­êµ¬ì¡°ë¥¼ ê°€ì§€ë©°, 

```r
M &lt;-  rbind(c(0,1,0,0), c(1,0,1,1), c(0,1,0,1), c(0,1,1,0))
node_name &lt;-  c("A", "B", "C", "D")
dimnames(M) &lt;-  list(node_name, node_name)
M_full &lt;- M
M_full
```

```
##   A B C D
## A 0 1 0 0
## B 1 0 1 1
## C 0 1 0 1
## D 0 1 1 0
```
- upper/lower triangualr matrixì¸ ê²½ìš° (ì•„ë˜ëŠ” í•˜ì‚¼ê°í–‰ë ¬)  

```r
M[upper.tri(M_full, diag = FALSE)] &lt;- 0
M_lower &lt;- M
M_lower
```

```
##   A B C D
## A 0 0 0 0
## B 1 0 0 0
## C 0 1 0 0
## D 0 1 1 0
```


---
 ì•ì—ì„œ ìƒì„±í•œ ë‘ í–‰ë ¬ M_fullê³¼ M_lowerë¥¼ ê·¸ë˜í”„ ì˜¤ë¸Œì íŠ¸ë¡œ ë§Œë“¤ì–´ë³´ì. 

```r
library(tidygraph)
# tidygraphíŒ¨í‚¤ì§€ë¡œ í–‰ë ¬ ë°ì´í„°ì—ì„œ igraph/tidygraph ì˜¤ë¸Œì íŠ¸ ìƒì„±
*g_full &lt;- as_tbl_graph(M_full, directed = FALSE)
# ì¼ë‹¨ igraphì˜ ê¸°ë³¸ ì‹œê°í™” ë„êµ¬ ì´ìš© 
plot(g_full) 
```

![](network_course_part01_files/figure-html/unnamed-chunk-6-1.png)&lt;!-- --&gt;
---
í•˜ì‚¼ê°í–‰ë ¬ë„ ì „ì²´ ëŒ€ì¹­í–‰ë ¬ì˜ ê·¸ë¦¼ê³¼ ë™ì¼í•œ ê²ƒìœ¼ë¡œ í™•ì¸ 

```r
# ì—­ì‹œ í–‰ë ¬ ë°ì´í„°ì—ì„œ igraph/tidygraph ì˜¤ë¸Œì íŠ¸ ìƒì„±
*g_lower &lt;- as_tbl_graph(M_lower, directed = FALSE)
plot(g_lower)
```

![](network_course_part01_files/figure-html/unnamed-chunk-7-1.png)&lt;!-- --&gt;


---
-í–‰ë ¬ì˜ í–‰ê³¼ ì—´ì´ ë‹¤ë¥¸ ëŒ€ìƒì¸ ê²½ìš° :
- ì¦‰, í–‰(row)ì´ ë¶„ì„í•˜ë ¤ëŠ” ëŒ€ìƒì´ê³ , ì—´(column)ì´ ë¶„ì„ëŒ€ìƒì˜ í”„ë¡œíŒŒì¼ ë²¡í„°ì˜ ìš”ì†Œì¸ ê²½ìš°
  (ì˜ˆ, í–‰ì´ ë¬¸ì„œ, ì—´ì´ ì°¸ê³ ë¬¸í—Œì¸ ê²½ìš° í–‰ë²¡í„°ëŠ” ê° ë¬¸ì„œì˜ **citing ë²¡í„°**)


```r
library(igraph)
A &lt;-  rbind(c(0,1,1,0,0), c(1,1,1,0,0), c(0,0,1,1,1), c(1,0,0,0,1))
doc_name &lt;-  c("D1", "D2", "D3", "D4")
ref_name &lt;- c("R1", "R2", "R3", "R4", "R5")
dimnames(A) &lt;-  list(doc_name, ref_name)
g &lt;- as_tbl_graph(A, directed = TRUE)
par(mar = c(14,2,0,2)) # ìŠ¬ë¼ì´ë“œ í¸ì§‘ì„ ìœ„í•œ ë‹¨ìˆœ ë§ˆì§„ ì„¤ì •
plot(g, layout = layout_as_bipartite) # bipartite ë„¤íŠ¸ì›Œí¬ ë ˆì´ì•„ì›ƒ 
```

&lt;img src="network_course_part01_files/figure-html/unnamed-chunk-8-1.png" width="70%" /&gt;
---
- ì´ì œ, ì•ì—ì„œ ìƒì„±í•œ citing profile ë²¡í„° ê°„ **ê²¹ì¹©**ì˜ ë¹ˆë„ë¥¼ edgeì˜ weightë¡œ í•˜ë ¤ê³  í•¨.
  (ì´ëŠ” ë’¤ì—ì„œ ì‚´í´ë³¼ **ì„œì§€ê²°í•©(bibliographic coupling)** ê´€ê³„ì„)
  

```r
# í–‰ë ¬ Aì™€ ì „ì¹˜í–‰ë ¬(transposed) Aì˜ ê³±ì´ ê²¹ì¹¨ ë¹ˆë„ë¥¼ ìƒì„±
BC &lt;- A %*% t(A) ; BC
```

```
##    D1 D2 D3 D4
## D1  2  2  1  0
## D2  2  3  1  1
## D3  1  1  3  1
## D4  0  1  1  2
```

```r
diag(BC) &lt;- 0 # ëŒ€ê°ê°’ì„ 0ìœ¼ë¡œ ë§Œë“ ë‹¤. 
g_BC &lt;- as_tbl_graph(BC, directed = FALSE); par(mar = c(15,2,0,2))
plot(g_BC)
```

&lt;img src="network_course_part01_files/figure-html/unnamed-chunk-10-1.png" width="60%" /&gt;
---

- **edge ë¦¬ìŠ¤íŠ¸(í–‰ë ¬ í˜•íƒœ)**ì—ì„œë„ ê·¸ë˜í”„ ìƒì„± ê°€ëŠ¥ 


```r
edge_list &lt;-  rbind(c("A","B"), c("B","A"), c("B","C"), c("C","A")) 
edge_list
```

```
##      [,1] [,2]
## [1,] "A"  "B" 
## [2,] "B"  "A" 
## [3,] "B"  "C" 
## [4,] "C"  "A"
```


```r
g &lt;- as_tbl_graph(edge_list, directed = FALSE)
par(mar=c(15,2,0,2))
plot(g)
```

&lt;img src="network_course_part01_files/figure-html/unnamed-chunk-12-1.png" width="70%" /&gt;
---
tidygraphì˜ ì˜¤ë¸Œì íŠ¸ë¥¼ ì¶œë ¥í•˜ë©´ í‘œì‹œë˜ëŠ” ê²ƒ 

```r
# ë°©ê¸ˆ ì „ edge listë¡œ ìƒì„±í•œ ê·¸ë˜í”„ ì˜¤ë¸Œì íŠ¸
g
```

```
## # A tbl_graph: 3 nodes and 4 edges
## #
## # An undirected multigraph with 1 component
## #
## # Node Data: 3 x 1 (active)
##   name 
##   &lt;chr&gt;
## 1 A    
## 2 B    
## 3 C    
## #
## # Edge Data: 4 x 2
##    from    to
##   &lt;int&gt; &lt;int&gt;
## 1     1     2
## 2     1     2
## 3     2     3
## # â€¦ with 1 more row
```
- directed/undirectedì— ëŒ€í•œ ê²ƒ, nodeì˜ ë°ì´í„°í”„ë ˆì„, edgeì˜ ë°ì´í„°í”„ë ˆì„ í™•ì¸
- edgeëŠ” **from**, **to*** ì¹¼ëŸ¼ìœ¼ë¡œ ë…¸ë“œì˜ **sequence index**ë¡œ í‘œì‹œ 

---
ê·¸ë˜í”„ ìƒì„±ì˜ ê°€ì¥ ê¸°ë³¸ì€ edge list(+ì†ì„±)ë¡œ êµ¬ì„±ëœ ë°ì´í„°í”„ë ˆì„, node list(+ì†ì„±)ë¡œ êµ¬ì„±ëœ ë°ì´í„°í”„ë ˆì„ìœ¼ë¡œë¶€í„° ìƒì„±í•˜ëŠ” ë°©ì‹ì„. 

- tidygraphëŠ” tidyverseì—ì„œ ë°ì´í„°í”„ë ˆì„ì„ ê´€ë¦¬í•˜ëŠ” ë°©ì‹ì¸ **tibble** í˜•íƒœê°€ ê¸°ë³¸

- ê·¸ëŸ¬ë‚˜ base-Rì˜ ë°ì´í„°í”„ë ˆì„ê³¼ 100% í˜¸í™˜ë˜ê³ , base-Rì—ì„œ ë°ì´í„°í”„ë ˆì„ì„ ë‹¤ë£¨ëŠ” ë°©ì‹ë„ ê·¸ëŒ€ë¡œ ì ìš© ê°€ëŠ¥ 

- [data.table](http://r-datatable.com) ë˜í•œ ìì²´ ë°ì´í„°í”„ë ˆì„ í˜•íƒœì¸ **data.table**ì„ ê°–ì¶”ê³  ìˆìœ¼ë©° base-Rì˜ ë°ì´í„°í”„ë ˆì„ê³¼ ë§ˆì°¬ê°€ì§€ë¡œ 100% í˜¸í™˜ 


```r
node_df &lt;- data.frame(name = c("Hadley", "David", "Romain", "Julia"))
edge_df &lt;- data.frame(from = c(1, 1, 1, 2, 3, 3, 4, 4, 4),
                            to = c(2, 3, 4, 1, 1, 2, 1, 2, 3))
test_g &lt;- tbl_graph(nodes = node_df, edges = edge_df, directed = TRUE)
par(mar = c(20,2,0,2)) ; plot(test_g)
```

&lt;img src="network_course_part01_files/figure-html/unnamed-chunk-14-1.png" width="70%" /&gt;
---
class: inverse

### ì—°ìŠµë¬¸ì œ 

* ì§€ê¸ˆê¹Œì§€ ë°°ìš´ ê·¸ë˜í”„ ì˜¤ë¸Œì íŠ¸ ìƒì„± ë°©ë²•ì„ ì´ìš©í•˜ì—¬ ì•„ë˜ì™€ ê°™ì€ ê·¸ë¦¼ì„ ì¶œë ¥í•´ ë³´ì„¸ìš”.  


```r
 plot(g)
```
![:scale 80%](/pic/Bull.png)
---
class: inverse

### ì—°ìŠµë¬¸ì œ 

* ì•ì„œ ìƒì„±í•œ bi-partite ë„¤íŠ¸ì›Œí¬ì˜ ê·¸ë˜í”„ ì˜¤ë¸Œì íŠ¸ì—ì„œ ë…¸ë“œì˜ **ì†ì„±**ì„ ì°¾ê³ , ë‹¤ë¥¸ ê·¸ë˜í”„ì™€ì˜ ì°¨ì´ì ì„ í™•ì¸í•´ ë³´ì„¸ìš”.  
---
### ë‹¹ì—°íˆ ë“¤ì–´ì•¼ í•˜ëŠ” ì˜ë¬¸ : link ì •ë³´ì˜ **ì¶œì²˜**

ë…¸ë“œì™€ ë…¸ë“œì˜ ì—°ê²°ê´€ê³„, ì¦‰ ë§í¬/ì—£ì§€ë¦¬ìŠ¤íŠ¸ëŠ” ê²°ì½” ê³µì§œê°€ ì•„ë‹˜. ì—°ê²°ê´€ê³„ëŠ” ëŒ€ë¶€ë¶„ ì—°ê²°ê´€ê³„ë¥¼ 'ë­‰ì³ ë†“ì€' ê³³ì—ì„œ ì—°ê²°ì˜ ìœ í˜•ì— ë”°ë¼ **ì¶”ì¶œ**â›ï¸í•´ë‚´ì•¼ í•˜ëŠ” ê²ƒì„. 

ë°œìƒí•  ìˆ˜ ìˆëŠ” **ì—°ê²°ì˜ ìœ í˜•**ì´ë€?

- **ë™ì‹œ ì¶œí˜„(co-occurrence)** : ë¶„ì„ ë‹¨ìœ„ ë‚´ì—ì„œ ë¶„ì„ ëŒ€ìƒ ê°œì²´ë“¤ì´ í•¨ê»˜ ì¶œí˜„í•˜ëŠ” ê²ƒì„ ì˜ë¯¸&lt;br&gt; 
    ì˜ˆ 1) ë¬¸ì„œ ë‹¨ìœ„ì—ì„œ **ê³µì €(co-author)** ê´€ê³„ë¡œ ë°œìƒí•˜ëŠ” ì—°êµ¬ì, ì—°êµ¬ê¸°ê´€, ì„¹í„°, ì§€ì—­, êµ­ê°€ ë“±ì˜ ê³µì¡´&lt;br&gt; 
    ì˜ˆ 2) ë¬¸ì„œ ë‹¨ìœ„ì—ì„œ **ì¸ì§€ì  ê´€ê³„**ë¡œ ë°œìƒí•˜ëŠ” (ì €ì)í‚¤ì›Œë“œ, í•™ë¬¸ë¶„ë¥˜ì½”ë“œ ë“±ì˜ ê³µì¡´&lt;br&gt;
    ì˜ˆ 3) ì•¨ë²” ë‹¨ìœ„ì—ì„œ ì—°ì£¼ì ê°„ í˜‘ì—°ê´€ê³„ë¡œ ë°œìƒí•œ ì—°ì£¼ì ê°„ ê³µì¡´&lt;br&gt;
    ì˜ˆ 4) ê°€ì¡± ë‹¨ìœ„ì—ì„œ ê²°í˜¼ê´€ê³„ì— ì˜í•œ ê°€ë¬¸ì˜ ê³µì¡´ ë“±ë“±&lt;br&gt; 

- **ë°©í–¥ì„± ìˆëŠ” ìƒí˜¸ í–‰ìœ„**  : ë¶„ì„ ëŒ€ìƒ ê°œì²´ë“¤ì˜ ë°©í–¥ì„±ìˆëŠ” í–‰ìœ„ë¡œ ë°œìƒí•˜ëŠ” ê´€ê³„ë¥¼ ì˜ë¯¸&lt;br&gt; 
    ì˜ˆ 1) ë¬¸ì„œ ê°„ì˜ ì¸ìš© ê´€ê³„ (ì¼ë°©ì )&lt;br&gt;
    ì˜ˆ 2) ì €ë„/ì—°êµ¬ê¸°ê´€/êµ­ê°€/ë¶„ì•¼ ê°„ì˜ ì¸ìš© ê´€ê³„ (ìƒí˜¸ì )&lt;br&gt;
    ì˜ˆ 3) êµ­ê°€ ê°„ êµì—­ ê´€ê³„ (ìƒí˜¸ì )&lt;br&gt;
    ì˜ˆ 4) ìš°ì •/ì• ì • ê´€ê³„ ë“±ë“±&lt;br&gt;  



---

- **í”„ë¡œíŒŒì¼ ê¸°ë°˜ ìœ ì‚¬ë„** : ë¶„ì„ ëŒ€ìƒ ê°œì²´ ê°„ì˜ ì§ì ‘ì  ê´€ê³„ê°€ ì•„ë‹ˆë¼, ë³„ë„ì˜ íŠ¹ì„±ì„ ê¸°ì¤€ìœ¼ë¡œ í˜•ì„±ëœ í”„ë¡œíŒŒì¼ì„ ìƒí˜¸ ë¹„êµí•˜ì—¬ ë„ì¶œí•œ ìœ ì‚¬ ê´€ê³„ë¥¼ ì˜ë¯¸&lt;br&gt;
    ì˜ˆ 1) ì—°êµ¬ì/ì—°êµ¬ê¸°ê´€/êµ­ê°€ ë“±ì˜ ë‹¨ìœ„ì—ì„œ í˜•ì„±í•œ ì—°êµ¬ë¶„ì•¼/í‚¤ì›Œë“œ ë²¡í„°ì˜ ìœ ì‚¬ì„± ë¹„êµ&lt;br&gt; 
    ì˜ˆ 2) ê°œì²´ê°„ ë™ì‹œì¶œí˜„ ê´€ê³„ì— ëŒ€í•œ 2ì°¨(second-order) ìœ ì‚¬ë„ ë„ì¶œ 
    

ì´ì™€ ë³„ë„ë¡œ ë‘ ê°œì²´ ê°„ì˜ ì§ì ‘ì ì¸ ë™ì‹œì¶œí˜„ ê´€ê³„ëŠ” ë³´í†µ ì •ê·œí™” ê³¼ì •ì„ ê±°ì¹˜ë©°, 

   ![:scale 55%](/pic/cooc_normalize.png)

Association Strength, Cosine, Inclusion, Jaccard ë“±ì˜ ìœ ì‚¬ë„ ì§€ìˆ˜ í™œìš© (*Si*ëŠ” iê°œì²´ì˜ ì´ ì¶œí˜„ë¹ˆë„) 

---
í”„ë¡œíŒŒì¼ ê¸°ë°˜ ìœ ì‚¬ë„ëŠ” í”„ë¡œíŒŒì¼ ë²¡í„° ê°„ì˜ ìœ ì‚¬ë„ë¥¼ ì¸¡ì •í•˜ê²Œ ë˜ë©° ëŒ€ê°œ ë‘ ë²¡í„° ê°„ì˜ Cosineì„ ì¸¡ì • 

  ![:scale 50%](/pic/cosine_formula.png)

- ê°œì²´ì˜ ê°¯ìˆ˜ì— ë”°ë¼ ë¹„êµí•´ì•¼í•  ê°œì²´ì˜ ìŒì´ ê¸‰ê²©íˆ ì¦ê°€ (n*(n-1)/2)&lt;br&gt;
   ê°œì²´ê°€ 1000ê°œë©´ 499,500 pairs &lt;br&gt;
   ê°œì²´ê°€ 10000ê°œë©´ 49,995,000 pairs &lt;br&gt;
   
- ì¦‰, ì•ì„œ ì‚´í´ë³¸ tbl_graph ì˜¤ë¸Œì íŠ¸ë¥¼ ìƒì„±í•œë‹¤ê³  í•  ë•Œ, nodeìª½ ë°ì´í„°í”„ë ˆì„ì˜ í–‰(row) ê°¯ìˆ˜ëŠ” 10000ê°œì—¬ë„, edgeìª½ì˜ ë°ì´í„°í”„ë ˆì„ í–‰(row) ê°¯ìˆ˜ëŠ” ê±°ì˜ 5ì²œë§Œ ê°œì— ë‹¬í•˜ê²Œ ë˜ëŠ” ê²ƒì„. 


- ì˜¤ëŠ˜ ê°•ì˜ì˜ í•µì‹¬ì€ ê°ê°ì˜ ì—°ê²° ìœ í˜•ì— ëŒ€í•´ ë§í¬ë¥¼ ìƒì„±í•˜ëŠ” ê¸°ë²•ì˜ í•™ìŠµì„. 

---
## ì‹¤ì¡´ ì„œì§€ ë°ì´í„° ì—¿ë³´ê¸° 

* Web of Scienceì—ì„œ ê°œë³„ ë…¼ë¬¸ì— ëŒ€í•´ ê° ë¶„ì„ ëŒ€ìƒë“¤ì´ **í•„ë“œ(field)**ì— í˜¼ì¬ë˜ì–´ ìˆëŠ” ëª¨ìŠµ (ì˜ˆ : ê¹€ë¹›ë‚´ë¦¬ êµìˆ˜ ë…¼ë¬¸)


![:scale 110%](/pic/Vnarry_01.png)
---

* Co-occurrences, Directed relations, (Profile based) Similarity ë“±ì˜ ê´€ê³„ëŠ” ë¶„ì„ìê°€ ì •ì˜í•œ **ë¬¸ì„œ ì§‘í•©**ì—ì„œ **ëˆ„ì **ëœ ê°’ì„ ê³„ì‚°í•˜ì—¬ ì¶”ì¶œ   

![:scale 110%](/pic/Vnarry_02.png)
---
class: inverse, middle, center

### web of science  ë°ì´í„°ì—ì„œ ì–´ë–¤ ëŒ€ìƒì— ëŒ€í•˜ì—¬ 

### ì–´ë– í•œ ì—°ê²° ê´€ê³„ë¥¼ ì¶”ì¶œí•˜ì—¬ ë¶„ì„í•´ë³´ê³  ì‹¶ì€ì§€

### ê°ì ìƒê°í•´ë´…ì‹œë‹¤. 

---
#### BC, CCì— ëŒ€í•œ ë³´ë¡  

ì„œì§€ì •ë³´ì˜ ì¸ìš©ê´€ê³„ë¥¼ ì´ìš©í•œ ê°œì²´ ê°„ ìœ ì‚¬ë„ ì‚°ì¶œì— í™œìš©ë˜ëŠ” ëŒ€í‘œì ì¸ ê¸°ë²•ì´ **ì„œì§€ ê²°í•©(BC, Bibliographic Coupling)**ê³¼ **ë™ì‹œì¸ìš©(CC, Co-citation)**ì´ ìˆìŒ. 

ë³´í†µ **ë¬¸ì„œ ê°„**ì˜ ì¸ìš© ê´€ê³„ì— ì ìš©í•˜ë‚˜, ë¹„êµ ëŒ€ìƒ ê°œì²´ì™€ ì¸ìš©/í”¼ì¸ìš© í”„ë¡œíŒŒì¼ ë²¡í„°ë¥¼ êµ¬ì„±í•˜ëŠ” ê°œì²´ê°€ ë¬¸ì„œì— í•œì •ë  í•„ìš”ëŠ” ì—†ìŒ (ì—°êµ¬ì/ì—°êµ¬ê¸°ê´€ ë“±ì˜ ì¸ìš© ê´€ê³„ êµ¬ì„±).

BC, CCëŠ” ì•ì„œ **ì—°ê²°ì˜ ìœ í˜•**ì—ì„œ í”„ë¡œíŒŒì¼ ê¸°ë°˜ì˜ ìœ ì‚¬ë„ì— í•´ë‹¹ë¨. 

* BCëŠ” ë¹„êµ ëŒ€ìƒ ê°œì²´ì˜ ë ˆí¼ëŸ°ìŠ¤ í”„ë¡œíŒŒì¼ ë²¡í„°(citing vector, backward-citation) ê°„ **ì¤‘ì²© ë¹ˆë„**ë¡œ, CCëŠ” ë¹„êµ ëŒ€ìƒ ê°œì²´ì˜ í”¼ì¸ìš© í”„ë¡œíŒŒì¼ ë²¡í„°(cited vector, forward-citation) ê°„ì˜ **ì¤‘ì²© ë¹ˆë„**ë¡œ ê°€ì •í•˜ë©´ ë¨. 
![:scale 85%](/pic/bc_cc_profile_scheme.png)

---
class: inverse, center, middle 
![:scale 18%](/pic/tidygraph_logo.png)
### ë„¤íŠ¸ì›Œí¬ ë°ì´í„°ë¥¼ ë‹¤ë£¨ê¸° ìœ„í•´ì„œëŠ”
### ê·¼ê°„ì„ ì´ë£¨ëŠ” 
### ë°ì´í„°í”„ë ˆì„ í˜•íƒœì˜ ë°ì´í„°ì— ëŒ€í•œ  
### ìˆ™ë ¨ëœ ì²˜ë¦¬ ëŠ¥ë ¥ì´ í•„ìš”
![:scale 18%](/pic/datatable_logo.png)  ![:scale 18%](/pic/dplyr_logo.png) 

---
### [data.table](http://r-datatable.com) íŒ¨í‚¤ì§€ì˜ ë³‘í–‰  

Python, R ë‘ ì§„ì˜ì—ì„œ ë°ì´í„° í”„ë ˆì„ ì²˜ë¦¬ ì†ë„ì™€ íš¨ìœ¨ì—ì„œ ì••ë„ì ì¸ ì„±ëŠ¥(https://h2oai.github.io/db-benchmark/) 
![:scale 65%](/pic/datatable_bench.png)

tidyverseì˜ dplyrì´ ì§ê´€ì ì´ë‚˜ ì„±ëŠ¥ì€ ë’¤ì³ì§. data.tableì„ ë°±ì—”ë“œë¡œ í•˜ê³ , dplyrì˜ ë¬¸ë²•ì„ ì ìš©í•  ìˆ˜ ìˆëŠ” [dtplyr](https://cran.r-project.org/web/packages/dtplyr/index.html)ë„ ë“±ì¥í•˜ê¸´ í•˜ì˜€ìœ¼ë‚˜, data.tableì˜ ì§ì ‘ ì´ìš© ì ê·¹ ê¶Œì¥ë¨.  

---
### mtcars ë°ì´í„°ë¡œ ë‹¤ì‹œ ëŒì•„ê°€ì„œ  
&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt;   &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; mpg &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; cyl &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; disp &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; hp &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; drat &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; wt &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; qsec &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; vs &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; am &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; gear &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; carb &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Mazda RX4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 21.0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 6 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 160 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 110 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3.90 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2.620 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 16.46 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Mazda RX4 Wag &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 21.0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 6 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 160 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 110 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3.90 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2.875 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 17.02 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Datsun 710 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 22.8 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 108 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 93 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3.85 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2.320 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 18.61 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Hornet 4 Drive &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 21.4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 6 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 258 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 110 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3.08 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3.215 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 19.44 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Hornet Sportabout &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 18.7 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 360 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 175 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3.15 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3.440 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 17.02 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Valiant &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 18.1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 6 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 225 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 105 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2.76 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3.460 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 20.22 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

base-R, dplyr, data.table ì„¸ê°€ì§€ ë°©ì‹ì„ í™•ì¸ 


```r
# ìš°ì„  mpg ë³€ìˆ˜(column)ë¥¼ ê°œë³„ ë²¡í„°ë¡œ ì¶”ì¶œí•˜ëŠ” ë°©ë²• 
# base-R
mtcars[["mpg"]]; mtcars$mpg; mtcars[, 1]
# dplyr
library(dplyr)
mtcars %&gt;% pull(mpg)
# data.table
library(data.table)
mtcars &lt;- as.data.table(mtcars)
mtcars[, mpg]
```

---
### ë³€ìˆ˜ì˜ ì¡°ì‘ 

**dplyr**
* mutate : ê¸°ì¡´ ë³€ìˆ˜ì— í•¨ìˆ˜ë¥¼ ì ìš©í•˜ì—¬ ìƒˆë¡œìš´ ë³€ìˆ˜ì˜ ìƒì„± 
* select : ë°ì´í„°í”„ë ˆì„ì—ì„œ ë³€ìˆ˜ë¥¼ ì„ íƒ 
* filter : ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ê°’ì„ ê°–ëŠ” í–‰(row)ì„ ì„ ë³„ 
* summarise : ì—¬ëŸ¬ ê°’ì„ ì¼ì • ê¸°ì¤€ê³¼ í•¨ìˆ˜ì— ë”°ë¼ í•˜ë‚˜ì˜ ê°’ìœ¼ë¡œ ì¶•ì†Œ 
* arrange : í–‰ì„ ì •ë ¬ 
* group_by : ìœ„ ëª¨ë“  ì¡°ì‘ì€ íŠ¹ì • ë³€ìˆ˜ì— ì¡´ì¬í•˜ëŠ” 'ê·¸ë£¹'ë³„ë¡œ ì ìš©    

**data.table**
* í˜•íƒœ : **dt[i, j, by]**
* dtë¼ëŠ” ë°ì´í„°í”„ë ˆì„ì—ì„œ 
* byì—ì„œ ì§€ì •í•œ ë³€ìˆ˜ì˜ ê·¸ë£¹ì— ë”°ë¼ (ì˜µì…˜)
* iì—ì„œ ì§€ì •í•œ ì¡°ê±´ì˜ í–‰ì„ ì„ ë³„ (ì˜µì…˜)
* jì—ì„œ ì§€ì •í•œ ë³€ìˆ˜ì— í•¨ìˆ˜ë¥¼ ì ìš© 
* jëŠ” ê¸°ì¡´ ë°ì´í„°í”„ë ˆì„ ë‚´ì—ì„œ ì—…ë°ì´íŠ¸ë˜ê±°ë‚˜ (:=), 
* ìƒˆë¡œìš´ ë°ì´í„°í”„ë ˆì„ì„ ìƒì„±(.())
---
#### ë°˜ë“œì‹œ ìˆ™ë ¨ëœ ì¡°ì‘ ëŠ¥ë ¥ì„ ìœ„í•œ ì§€ì†/ë°˜ë³µ í•™ìŠµ í•„ìš”  

dplyr, data.table ë‘˜ ë‹¤ ì˜ ì •ë¦¬ëœ cheatsheet, vignetteì´ ì¡´ì¬  
ì˜¤ëŠ˜ ê°•ì˜ì—ì„œëŠ” ë‘ íŒ¨í‚¤ì§€ì˜ ì°¨ì´ë¥¼ í™•ì¸í•˜ëŠ” ìœ„ì£¼ì˜ ì˜ˆì œë¥¼ ëª‡ê°€ì§€ ì§„í–‰ 


```r
# dplyr 
library(dplyr)
starwars %&gt;% # ìŠ¬ë¼ì´ë“œ í‘œì‹œë¥¼ ìœ„í•´ ì²« 3í–‰ê³¼ 1~5ë²ˆì§¸ ì¹¼ëŸ¼ë§Œ ì¶œë ¥ 
  filter(species == "Droid") %&gt;% head(3) %&gt;% select(1:5)
```

```
## # A tibble: 3 x 5
##   name  height  mass hair_color skin_color 
##   &lt;chr&gt;  &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      
## 1 C-3PO    167    75 &lt;NA&gt;       gold       
## 2 R2-D2     96    32 &lt;NA&gt;       white, blue
## 3 R5-D4     97    32 &lt;NA&gt;       white, red
```


```r
# data.table
library(data.table)
star_dt &lt;- as.data.table(starwars) # ë˜ëŠ” setDT(mtcars)
star_dt[species == "Droid"][1:3, 1:5]
```

```
##     name height mass hair_color  skin_color
## 1: C-3PO    167   75       &lt;NA&gt;        gold
## 2: R2-D2     96   32       &lt;NA&gt; white, blue
## 3: R5-D4     97   32       &lt;NA&gt;  white, red
```

---
#### í•˜ë‚˜í•˜ë‚˜ ë¹„êµí•´ ë³´ê¸° 


```r
# dplyr : regular expression 
starwars %&gt;% 
  select(name, ends_with("color")) %&gt;% head(3)
```

```
## # A tibble: 3 x 4
##   name           hair_color skin_color  eye_color
##   &lt;chr&gt;          &lt;chr&gt;      &lt;chr&gt;       &lt;chr&gt;    
## 1 Luke Skywalker blond      fair        blue     
## 2 C-3PO          &lt;NA&gt;       gold        yellow   
## 3 R2-D2          &lt;NA&gt;       white, blue red
```


```r
# data.table : regular expression 
# SD = Subset of Data
star_dt[, .SD, .SDcols = patterns("color$")][1:3, ]
```

```
##    hair_color  skin_color eye_color
## 1:      blond        fair      blue
## 2:       &lt;NA&gt;        gold    yellow
## 3:       &lt;NA&gt; white, blue       red
```
---
#### ìƒˆë¡œìš´ ë³€ìˆ˜ ìƒì„±í•˜ê¸° 

```r
# dplyr : mutate 
starwars %&gt;% 
  mutate(bmi = mass / ((height / 100)  ^ 2)) %&gt;%
  select(name:mass, bmi) %&gt;% head(3)
```

```
## # A tibble: 3 x 4
##   name           height  mass   bmi
##   &lt;chr&gt;           &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 Luke Skywalker    172    77  26.0
## 2 C-3PO             167    75  26.9
## 3 R2-D2              96    32  34.7
```


```r
# data.table : update ':='
star_dt[, bmi := mass / ((height / 100) ^2)][1:3, .(1:3, 14)]
```

```
##    V1 V2
## 1:  1 14
## 2:  2 14
## 3:  3 14
```
---
#### ë°ì´í„° ì •ë ¬ 


```r
# dplyr : arrange + desc  
starwars %&gt;% 
  arrange(desc(mass)) %&gt;% 
  head(3) %&gt;% select(1:5)
```

```
## # A tibble: 3 x 5
##   name                  height  mass hair_color skin_color      
##   &lt;chr&gt;                  &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;           
## 1 Jabba Desilijic Tiure    175  1358 &lt;NA&gt;       green-tan, brown
## 2 Grievous                 216   159 none       brown, white    
## 3 IG-88                    200   140 none       metal
```


```r
# data.table : order + -  
star_dt[order(-mass), ][1:3, 1:5]
```

```
##                     name height mass hair_color       skin_color
## 1: Jabba Desilijic Tiure    175 1358       &lt;NA&gt; green-tan, brown
## 2:              Grievous    216  159       none     brown, white
## 3:                 IG-88    200  140       none            metal
```

---
#### ê·¸ë£¹ ê¸°ì¤€ì˜ ë³µí•© ì—°ì‚° 


```r
# dplyr : group_by + summarise  
starwars %&gt;%
  group_by(species) %&gt;%
  summarise(
    n = n(),
    mass = mean(mass, na.rm = TRUE)
  ) %&gt;%  filter(n &gt; 1, mass &gt; 50) %&gt;% arrange(desc(n)) %&gt;% head(4) 
```

```
## # A tibble: 4 x 3
##   species      n  mass
##   &lt;chr&gt;    &lt;int&gt; &lt;dbl&gt;
## 1 Human       35  82.8
## 2 Droid        5  69.8
## 3 Gungan       3  74  
## 4 Kaminoan     2  88
```


```r
# data.table : by + list(== .())  
star_dt[, .(n = .N, 
          mass = mean(mass, na.rm  = TRUE)), 
        by = .(species)][n &gt; 1 &amp; mass &gt; 50, ][order(-n),][1:4, ]
```

```
##    species  n      mass
## 1:   Human 35  82.78182
## 2:   Droid  5  69.75000
## 3:  Gungan  3  74.00000
## 4: Wookiee  2 124.00000
```
---
class: inverse

#### ì—°ìŠµë¬¸ì œ 

* mtcars ë°ì´í„°ì—ì„œ ê¸°ì–´ ë‹¨ìˆ˜(gear)ì— ë”°ë¥¸ í‰ê·  ì—°ë¹„(mpg)ë¥¼ 'avg_mpg' ë³€ìˆ˜ë¡œ ìƒì„±í•˜ê³ , ê²°ê³¼ë¥¼ í‰ê·  ì—°ë¹„ì˜ ë‚´ë¦¼ì°¨ìˆœìœ¼ë¡œ ì •ë¦¬í•´ ë³´ì„¸ìš”.  

* ìœ„ ë¬¸ì œì—ì„œ ê¸°ì–´ ë‹¨ìˆ˜(gear) ê¸°ì¤€ê³¼ì™€ ìë™/ìˆ˜ë™ë³€ì†ê¸° ì—¬ë¶€(am, 0ì€ ìë™ 1ì€ ìˆ˜ë™) ê¸°ì¤€ì„ ê²°í•©í•˜ì—¬ í‰ê·  ì—°ë¹„ë¥¼ ê³„ì‚°í•˜ê³  í‰ê·  ì—°ë¹„ì˜ ë‚´ë¦¼ì°¨ìˆœìœ¼ë¡œ ì •ë¦¬í•´ ë³´ì„¸ìš”. 

* iris ë°ì´í„°ì—ì„œ Species ë³€ìˆ˜ (3ê°œ ì¢…ë¥˜)ë¥¼ ê¸°ì¤€ìœ¼ë¡œ Sepal.Length, Sepal.Width, Petal.Length, Petal.Width ë³€ìˆ˜ì˜ í‰ê· ê°’ì„ êµ¬í•´ë³´ì„¸ìš”. 
  (íŒíŠ¸ : dplyrì€ summarise_at, data.tableì€ lapplyì™€ .SDì˜ ì¡°í•©)

---

class: inverse, middle, center

### ë„¤íŠ¸ì›Œí¬ ì‹œê°í™”ë¥¼ ìœ„í•œ ggraphì€ 
![](/pic/ggraph_logo.png)
### ggplot2ê³¼ ì—°ë™ + ë¬¸ë²• ê·¸ëŒ€ë¡œ ì´ìš© 
![:scale 18%](/pic/ggplot2_logo.png)
### ggplot2ì˜ í™œìš©ëŠ¥ë ¥ì€? 
---
##### ggplot
.pull-left[
ggplot2ëŠ” ê·¸ë˜í”„ì˜ ìš”ì†Œë“¤ì„ ë ˆì´ì–´(layer)í™”í•˜ê³ , ì´ë¥¼ ê²°í•©í•˜ëŠ” ë§¤ìš° ì²´ê³„ì ì¸ ë¬¸ë²•êµ¬ì¡°ë¥¼ ê°–ì¶”ê³  ìˆìŒ. 

![:scale 72%](/pic/ggplot_scheme_01.png)]
.pull-right[![:scale 75%](/pic/ggplot_scheme_02.png)]
---
#### gapminder ë°ì´í„° ì‹œê°í™” 

```r
library(ggplot2)
library(gapminder)
# mappingì—ëŠ” ê·¸ë˜í”„ì—ì„œ ë³€ìˆ˜ì˜ ê°’ì— ë”°ë¼ ë³€ë™ì„ ë¶€ì—¬í•˜ëŠ” ìš”ì†Œ 
p &lt;- ggplot(data = gapminder, 
            mapping = aes(x = gdpPercap, y=lifeExp))
# ì‚°ì ë„ ê·¸ë˜í”„ ì ìš© + ìŠ¤ë¬´ë”© ì ìš© 
p + geom_point() + geom_smooth()
```

&lt;img src="network_course_part01_files/figure-html/unnamed-chunk-28-1.png" width="50%" /&gt;
---
#### ì¡°ê¸ˆ ë” ì‚°ëœ»í•˜ê²Œ ê¾¸ë¯¸ê¸°  

```r
p + geom_point(alpha = 0.3) + # alphaëŠ” íˆ¬ëª…ë„ 
    geom_smooth(method = "gam") + # generalized additive model ìŠ¤ë¬´ë”© 
    scale_x_log10(labels = scales::dollar) + # ë¡œê·¸ ì¶•ìœ¼ë¡œ ë³€ê²½ 
    labs(x = "GDP Per Capita", y = "Life Expectancy in Years",
         title = "Economic Growth and Life Expectancy",
         subtitle = "Data points are country-years",
         caption = "Source: Gapminder.")
```

&lt;img src="network_course_part01_files/figure-html/unnamed-chunk-29-1.png" width="50%" /&gt;
---
#### ë¹ ì ¸ ìˆëŠ” ìš”ì†Œ íƒìƒ‰ 

```r
p &lt;- ggplot(data = gapminder,
            mapping = aes(x = gdpPercap,
                          y = lifeExp,
                          color = continent, # ëŒ€ë¥™ë³„ í¸ì°¨ 
                          fill = continent)) # fillë„ ì—°ë™ (ì—ëŸ¬ë°” ìƒ‰ ë³´ì •) 
p + geom_point() +
    geom_smooth(method = "loess") +
    scale_x_log10()
```

&lt;img src="network_course_part01_files/figure-html/unnamed-chunk-30-1.png" width="48%" /&gt;
---
#### ggplotì— ë§ëŠ” ë°ì´í„° í˜•íƒœ ë³€í™˜ 
ì¼ìƒì—ì„œ ë§ˆì£¼ì¹˜ëŠ” ë°ì´í„° í˜•íƒœëŠ” "wide" í˜•íƒœê°€ ë” ë§ìŒ. ì´ë¥¼ í…Œë©´ ë‚¨ì, ì—¬ìë¥¼ ë³„ë„ì˜ ì¹¼ëŸ¼(ë³€ìˆ˜)ìœ¼ë¡œ ì§‘ì–´ ë„£ëŠ” ê²ƒì„. ì´ëŸ° êµ¬ì¡°ì—ì„œëŠ” ë‚¨ì ê·¸ë˜í”„ ë”°ë¡œ, ì—¬ì ê·¸ë˜í”„ ë•Œë¡œ ë§Œë“¤ ìˆ˜ë°–ì— ì—†ìŒ. 

ë§Œì•½ ë‚¨ì ì—¬ìë¥¼ 'ì  ë”'ë¼ëŠ” ë³€ìˆ˜ì—ì„œ "long" í˜•íƒœë¡œ í•˜ì—¬ ë°ì´í„°ë¥¼ ë§Œë“¤ì—ˆë‹¤ë©´, ggplotì˜ `mapping=aes(colour = gender)` ì´ëŸ° ë°©ì‹ìœ¼ë¡œ í•œ ê·¸ë˜í”„ ë‚´ì—ì„œ ë‘˜ì„ ë¶„ë¦¬í•˜ì—¬ í‘œì‹œí•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•´ì§.   

ì´ëŸ¬í•œ ë¬¸ì œì— ëŒ€í•œ í•´ê²° ë°©ì‹ì„ ì œì‹œí•˜ê¸° ìœ„í•´ ì•„ë˜ì™€ ê°™ì€ ê°€ìƒ ë°ì´í„° ìƒì„± 

```r
dt &lt;- data.table(year = 2000:2019 ,
                 math_woman = 65:84*(1+rnorm(20,0,0.05)),
                 kor_woman = 75:94*(1+rnorm(20,0,0.05)))
head(dt, 4)
```

```
##    year math_woman kor_woman
## 1: 2000   66.75162  72.69015
## 2: 2001   69.40171  78.50991
## 3: 2002   68.89585  73.00883
## 4: 2003   67.94095  75.73458
```
---
ì™€ì´ë“œ í˜•íƒœì—ì„œëŠ” ë…„ë„ë³„ë¡œ ê° ì¹¼ëŸ¼ì˜ ê°’ì„ ë³´ì—¬ì£¼ëŠ” ë°©ì‹ë§Œ ê°€ëŠ¥ 

```r
ggplot(dt, mapping = aes(x = year, y = math_woman)) +
  geom_line() + geom_point(color = "steelblue") +
  geom_smooth()
```

&lt;img src="network_course_part01_files/figure-html/unnamed-chunk-32-1.png" width="40%" /&gt;

---
#### ë¡±íƒ€ì… ë³€í™˜ì€ data.table::meltí•¨ìˆ˜ë¡œ 

```r
# ìœ„ ë°ì´í„°ëŠ” id.varsëŠ” ê³ ìœ  í‚¤ê°’ì„, 
# measure.vars ëŠ” ìœ í˜•ì„ ë¬¶ì–´ì„œ(=ë¡±íƒ€ì…ìœ¼ë¡œ í•˜ì—¬) ê°’ì„ ë¶€ì—¬ 
# variable.name ì€ ë¬¶ì–´ì„œ ìƒì„±ëœ ìƒˆ ë³€ìˆ˜ ì´ë¦„. 
# value.nameì€ ì§€ì •í•˜ì§€ ì•Šìœ¼ë©´ ìë™ìœ¼ë¡œ "value"ë¼ëŠ” ì»¬ëŸ¼ ë¶€ì—¬ 
dt_melt &lt;- melt(dt, id.vars = 1, 
                measure.vars = c("math_woman", "kor_woman"),
                variable.name = "subject", 
                value.name = "score")
head(dt_melt, 10)
```

```
##     year    subject    score
##  1: 2000 math_woman 66.75162
##  2: 2001 math_woman 69.40171
##  3: 2002 math_woman 68.89585
##  4: 2003 math_woman 67.94095
##  5: 2004 math_woman 69.94414
##  6: 2005 math_woman 71.66124
##  7: 2006 math_woman 69.80130
##  8: 2007 math_woman 77.75905
##  9: 2008 math_woman 71.38101
## 10: 2009 math_woman 67.48954
```

---
#### ë¡±íƒ€ì… ë°ì´í„°ê°€ ggplotì—ì„œ ì ìš©ë˜ë©´ 

```r
ggplot(dt_melt, aes(x = year, y = score, color = subject)) + 
  geom_line() + geom_point()
```

&lt;img src="network_course_part01_files/figure-html/unnamed-chunk-34-1.png" width="60%" /&gt;



---
#### ì¡°ê¸ˆ ë” ì–´ë ¤ìš´ ë³µí•© wide í˜•íƒœ 


```r
dt &lt;- data.table(year = 2000:2019 ,
                 math_woman = 65:84*(1+rnorm(20,0,0.05)),
                 kor_woman = 75:94*(1+rnorm(20,0,0.05)),
                 math_man = 70:89*(1+rnorm(20,0,0.05)),
                 kor_man = 65:84*(1+rnorm(20,0,0.05)))
head(dt, 4)
```

```
##    year math_woman kor_woman math_man  kor_man
## 1: 2000   68.07563  75.53303 67.09133 65.16551
## 2: 2001   69.70449  77.39848 77.62002 63.98647
## 3: 2002   69.25154  78.43216 72.15817 67.31316
## 4: 2003   67.57296  79.29590 72.71578 59.62126
```

```r
# ì´ ê²½ìš°ì—ëŠ” ë‘ ë²ˆì— ê±¸ì³ ë‚˜ëˆ„ì–´ long íƒ€ì… ë³€í™˜ 
dt_melt &lt;- melt(dt, id.vars = 1, 
                measure.vars = list(c("math_woman", "math_man"),
                                    c("kor_woman", "kor_man")),
                variable.name = "gender",
                value.name = c("math", "kor"))
head(dt_melt, 4)
```

```
##    year gender     math      kor
## 1: 2000      1 68.07563 75.53303
## 2: 2001      1 69.70449 77.39848
## 3: 2002      1 69.25154 78.43216
## 4: 2003      1 67.57296 79.29590
```
---
#### ë‘ë²ˆì§¸ ë¡±íƒ€ì… ë³€í™˜ 

```r
dt_melt[, gender := factor(gender, levels = 1:2, labels = c("F", "M"))]
dt_melt2 &lt;- melt(dt_melt, id.vars = 1:2, measure.vars = 3:4, 
                 variable.name = "subject",
                 value.name = "score")
head(dt_melt2, 4)
```

```
##    year gender subject    score
## 1: 2000      F    math 68.07563
## 2: 2001      F    math 69.70449
## 3: 2002      F    math 69.25154
## 4: 2003      F    math 67.57296
```

---
#### facetìœ¼ë¡œ êµ¬ë¶„ 

```r
ggplot(dt_melt2, aes(x = year, y = score, 
                     color = subject)) + 
  geom_line() + geom_point() + facet_wrap(~gender)
```

&lt;img src="network_course_part01_files/figure-html/unnamed-chunk-38-1.png" width="50%" /&gt;

```r
# í•œê¸€ ì²˜ë¦¬ + ë¼ë²¨/ë ˆì „ë“œ/ì‚¬ìš©ììƒ‰ìƒ ë³€ê²½, 
# íŒŒì¼ ì €ì¥ ë“±ì˜ ë‚˜ìš©ì€ ë‚´ì¼ ê°•ì˜ì— í¬í•¨   
```

---
class: inverse

####  ì—°ìŠµë¬¸ì œ 

* mtcarsë°ì´í„°ë¥¼ ê°€ì§€ê³ , ê¸°ì–´ë‹¨ìˆ˜(gear)ë³„ë¡œ xì¶•ì— ë¬´ê²Œ(wt), yì¶•ì— ì—°ë¹„(mpg)ë¥¼ ì‚°ì ë„ë¡œ í‘œì‹œí•˜ê³ , ìŠ¤ë¬´ë”© ê³¡ì„ ì„ ì¶”ê°€í•´ì„œ ë‚˜íƒ€ë‚´ì–´ ë³´ì—¬ì£¼ì„¸ìš”. ê¸°ì–´ë‹¨ìˆ˜ë³„ êµ¬ë¶„ì„ ì–´ë–»ê²Œ í‘œí˜„í•  ì§€ì— ëŒ€í•´ ë‚˜ë¦„ëŒ€ë¡œ ê³ ë¯¼í•´ ë³´ì„¸ìš”. 


* irisë°ì´í„°ëŠ” ì„¸ê°€ì§€ ì¢…ì— ëŒ€í•´ Sepal.Length, Sepal.Width, Petal.Length, Petal.Width 4ê°€ì§€ ë“¤ì–´ ìˆë‹¤. ì´ 4ê°€ì§€ ë³€ìˆ˜ë¥¼ Lengthì™€ Widthë¥¼ "type"ì´ë¼ëŠ” ì´ë¦„ì˜ ë³€ìˆ˜ë¡œ í•˜ì—¬ long typeì„ ë§Œë“¤ê³ , ì•„ë˜ ê·¸ë¦¼ì„ ìƒì„±í•´ ë³´ì„¸ìš”.  

  ![:scale 70%](/pic/iris_exercise.png)

---
class: inverse, middle, center

## ë„¤íŠ¸ì›Œí¬ ì—°ê²° ê´€ê³„ ì¶”ì¶œ 

---
### ë™ì‹œ ì¶œí˜„(co-occurrence) ë¹ˆë„ êµ¬í•˜ê¸°  

5ì¥ì˜ (ê°€ìƒì˜) ì¬ì¦ˆ ìŒë°˜ì—ì„œ ì—°ì£¼ìë“¤ì˜ í˜‘ì—° ë¹ˆë„ë¥¼ ì¶”ì¶œí•´ë³´ì. ë³´í†µ í•˜ë‚˜ì˜ row ë‹¨ìœ„ì—ì„œ ë™ì‹œ ì¶œí˜„ì€ í•˜ë‚˜ì˜ í•„ë“œì— êµ¬ë¶„ì(separator)ë¡œ ë¬¶ì—¬ ìˆê²Œ ëœë‹¤. Web of Scienceì˜ ë°ì´í„°ë¥¼ ë°›ê²Œ ë˜ë©´, row í•˜ë‚˜ëŠ” ë¬¸í—Œì— í•´ë‹¹í•˜ê³  ë™ì‹œ ì¶œí˜„ ê´€ê³„ê°€ ì¡´ì¬í•˜ëŠ” ë‹¨ìœ„ëŠ” ì¹¼ëŸ¼(=í•„ë“œ)ì— í•´ë‹¹í•œë‹¤.


```r
dt &lt;- data.table(rec = 1:5, 
   musician = c("John Coltrane;McCoy Tyner;Reggie Workman;Elvin Jones",
              "John Coltrane;Miles Davis;Ron Carter;Herbie Hancock",
              "Miles Davis;Wayne Shorter;Ron Carter;Elvin Jones",
              "Wayne Shorter;McCoy Tyner;Reggie Workman;Elvin Jones",
              "Joe Henderson;McCoy Tyner;Ron Carter;Al Foster"))
dt
```

```
##    rec                                             musician
## 1:   1 John Coltrane;McCoy Tyner;Reggie Workman;Elvin Jones
## 2:   2  John Coltrane;Miles Davis;Ron Carter;Herbie Hancock
## 3:   3     Miles Davis;Wayne Shorter;Ron Carter;Elvin Jones
## 4:   4 Wayne Shorter;McCoy Tyner;Reggie Workman;Elvin Jones
## 5:   5       Joe Henderson;McCoy Tyner;Ron Carter;Al Foster
```

---
### data.table ë°©ì‹ 
êµ¬ë¶„ìë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë¬¸ì ìŠ¤íŠ¸ë§ì„ êµ¬ë¶„í•˜ë©´ ë°˜í™˜ë˜ëŠ” ê°’ì€ **ë¦¬ìŠ¤íŠ¸** ì´ë‹¤. ë”°ë¼ì„œ ì´ë¥¼ **unlist** í•¨ìˆ˜ë¥¼ ì ìš©í•˜ì—¬ **ë²¡í„°**ë¡œ ë§Œë“ ë‹¤. ì´ ì‘ì—…ì„ ê° ìŒë°˜(ë ˆì½”ë“œ)ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ìˆ˜í–‰í•œë‹¤. ì´ì— í•´ë‹¹í•˜ëŠ” ê²ƒì´ ì•„ë˜ ì½”ë“œì´ë‹¤. 


```r
dt_long &lt;- dt[, 
      .(musician = unlist(strsplit(musician, ";"))), 
      by = .(rec)]
head(dt_long, 6)
```

```
##    rec       musician
## 1:   1  John Coltrane
## 2:   1    McCoy Tyner
## 3:   1 Reggie Workman
## 4:   1    Elvin Jones
## 5:   2  John Coltrane
## 6:   2    Miles Davis
```
ê·¸ ë‹¤ìŒì—ëŠ” ë¡± íƒ€ì…ìœ¼ë¡œ ìª¼ê°œ ë†“ì€ ê²ƒì„ ë‹¤ì‹œ ë ˆì½”ë“œ ê¸°ì¤€ìœ¼ë¡œ, pair ìŒì„ ë§Œë“¤ì–´ì•¼ í•œë‹¤. ì•ì„œ ê·¸ë˜í”„ ì˜¤ë¸Œì íŠ¸ë¥¼ ë§Œë“¤ ë•Œ edgeì˜ ë°ì´í„° í”„ë ˆì„ì´ from ì¹¼ëŸ¼, to ì¹¼ëŸ¼ìœ¼ë¡œ ë˜ì–´ ìˆì—ˆë˜ ê²ƒì„ ê¸°ì–µí•´ë³´ì. ê·¸ëŸ¬í•œ í˜•íƒœë¥¼ ë§ŒëŠ” ê²ƒì´ ëª©í‘œë‹¤.
---
pair ìŒì„ ë§Œë“œëŠ” ê²ƒì„ í•¨ìˆ˜ë¡œ ë§Œë“¤ì–´ ë‘ë©´ ì ìš©í•  ë•Œ í¸ë¦¬í•˜ë‹¤.  

```r
pair_construct &lt;- function(x) {
  x &lt;- sort(unique(x)) # ì •ë ¬ 
  if (length(x) ==1) return(
    data.table(V1 = x, V2 = x) # ì†”ë¡œ ìŒë°˜ì´ë©´ ë³¸ì¸ ê²ƒë§Œ pair list ìƒì„±í•˜ì.   
  )
  temp_mat &lt;- combn(x, 2) # combn ì€ ì¡°í•©í•˜ì—¬ í–‰ë ¬ë¡œ ë°˜í™˜í•œë‹¤.  
  temp_dt &lt;- as.data.table(t(temp_mat))
  return(temp_dt)
}
```

```r
# combní•¨ìˆ˜ì˜ ë°˜í™˜ ê²°ê³¼ë¥¼ í™•ì¸í•´ë³´ì 
combn(c("A","B","C"), 2)
```

```
##      [,1] [,2] [,3]
## [1,] "A"  "A"  "B" 
## [2,] "B"  "C"  "C"
```

```r
# ì „ì¹˜í–‰ë ¬ë¡œ ë°”ê¾¸ë©´ ì•ì—ì„œ ë³´ì•˜ë˜ edge list í–‰ë ¬ í˜•íƒœê°€ ë‚˜íƒ€ë‚œë‹¤.  
t(combn(c("A","B","C"), 2))
```

```
##      [,1] [,2]
## [1,] "A"  "B" 
## [2,] "A"  "C" 
## [3,] "B"  "C"
```

---
ë§Œë“¤ì–´ ë‘” í•¨ìˆ˜ë¥¼ ë ˆì½”ë“œ ê¸°ì¤€ìœ¼ë¡œ ì ìš©í•œë‹¤. 

```r
dt_pair &lt;- dt_long[, pair_construct(musician), by = .(rec)]
dt_pair[, weight := 1L] # weight ì¹¼ëŸ¼ì„ ìƒì„±í•˜ì—¬ ì¼ë‹¨ 1ì„ ë¶€ì—¬
```


```r
# pairë¥¼ ê¸°ì¤€ìœ¼ë¡œ weightë¥¼ í•©í•œë‹¤. 
dt_cooc_link &lt;- dt_pair[, .(weight = sum(weight)),
                        by = .(V1, V2)]
head(dt_cooc_link, 10)
```

```
##                 V1             V2 weight
##  1:    Elvin Jones  John Coltrane      1
##  2:    Elvin Jones    McCoy Tyner      2
##  3:    Elvin Jones Reggie Workman      2
##  4:  John Coltrane    McCoy Tyner      1
##  5:  John Coltrane Reggie Workman      1
##  6:    McCoy Tyner Reggie Workman      2
##  7: Herbie Hancock  John Coltrane      1
##  8: Herbie Hancock    Miles Davis      1
##  9: Herbie Hancock     Ron Carter      1
## 10:  John Coltrane    Miles Davis      1
```
---
 ê·¸ë˜í”„ ì˜¤ë¸Œì íŠ¸ë¡œ ë§Œë“ ë‹¤ìŒ, ggraphëŠ” ì•„ì§ ë°°ìš°ì§€ ì•Šì•˜ìœ¼ë¯€ë¡œ ì•„ì‰½ì§€ë§Œ igraphì˜ ê¸°ë³¸ í•¨ìˆ˜ë¡œ ì‹œê°í™”ë¥¼ í•´ë³¸ë‹¤. 

```r
g &lt;- as_tbl_graph(dt_cooc_link, directed = FALSE)
plot(g, width = TRUE, edge.width = edge_attr(g)$weight)
```

![](network_course_part01_files/figure-html/unnamed-chunk-46-1.png)&lt;!-- --&gt;
 
---
### dplyr ë°©ì‹ 

ë ˆì½”ë“œ ë‹¨ìœ„ë¡œ êµ¬ë¶„ì ê¸°ì¤€ìœ¼ë¡œ ë‚˜ëˆ„ì–´ ì£¼ëŠ” ë°©ì‹ì´ data.tableê³¼ ì•½ê°„ ì°¨ì´ê°€ ë‚˜ê²Œ ëœë‹¤. 


```r
library(tidyr)
library(purrr)
dt_long &lt;- dt %&gt;% 
  group_by(rec) %&gt;% 
  mutate(musician = strsplit(musician, ";")) %&gt;% # cellì— ë¦¬ìŠ¤íŠ¸ê°€ ë“¤ì–´ê°„ë‹¤.
  unnest(cols = musician) # tidyr::unnestëŠ” ë¦¬ìŠ¤íŠ¸ ì…€ì„ í’€ì–´ì¤€ë‹¤. 
head(dt_long, 8)
```

```
## # A tibble: 8 x 2
## # Groups:   rec [2]
##     rec musician      
##   &lt;int&gt; &lt;chr&gt;         
## 1     1 John Coltrane 
## 2     1 McCoy Tyner   
## 3     1 Reggie Workman
## 4     1 Elvin Jones   
## 5     2 John Coltrane 
## 6     2 Miles Davis   
## 7     2 Ron Carter    
## 8     2 Herbie Hancock
```

---
#### apply í•¨ìˆ˜ì˜ tidyverse ë²„ì „ì¸ purrr::mapí•¨ìˆ˜ ì ìš© 

```r
dt_pair2 &lt;- dt_long %&gt;%
  group_by(rec) %&gt;% 
  split(.$rec) %&gt;% # splitìœ¼ë¡œ ë ˆì½”ë“œ ë‹¨ìœ„ê°€ í•œ ìš”ì†Œì¸ ë¦¬ìŠ¤íŠ¸ë¥¼ ìƒì„±
  map(., function(x) pair_construct(x$musician)) %&gt;% # 
  bind_rows(.id = "rec") # ë¦¬ìŠ¤íŠ¸ ì•ˆì— ë“¤ì–´ ìˆëŠ” ë°ì´í„°í”„ë ˆì„ì„ ê²°í•© 
head(dt_pair2, 5)
```

```
##    rec            V1             V2
## 1:   1   Elvin Jones  John Coltrane
## 2:   1   Elvin Jones    McCoy Tyner
## 3:   1   Elvin Jones Reggie Workman
## 4:   1 John Coltrane    McCoy Tyner
## 5:   1 John Coltrane Reggie Workman
```
ì´í›„ ê³¼ì •ì€ ë™ì¼ 


```r
dt_pair_fin &lt;- dt_pair2 %&gt;% mutate(weight = 1) %&gt;% 
  group_by(V1, V2) %&gt;% summarise(weight = sum(weight))
head(dt_pair_fin, 4)
```

```
## # A tibble: 4 x 3
## # Groups:   V1 [2]
##   V1          V2            weight
##   &lt;chr&gt;       &lt;chr&gt;          &lt;dbl&gt;
## 1 Al Foster   Joe Henderson      1
## 2 Al Foster   McCoy Tyner        1
## 3 Al Foster   Ron Carter         1
## 4 Elvin Jones John Coltrane      1
```

---
dplyr ë²„ì „ì—ì„œë„ ê·¸ë˜í”„ ì˜¤ë¸Œì íŠ¸ë¡œ ë§Œë“ ë‹¤ìŒ, ì—­ì‹œ igraphë¥¼ ì´ìš©í•´ í™•ì¸í•œë‹¤. 

```r
g &lt;- as_tbl_graph(dt_pair_fin, directed = FALSE)
plot(g, width = TRUE, edge.width = edge_attr(g)$weight)
```

&lt;img src="network_course_part01_files/figure-html/unnamed-chunk-50-1.png" width="70%" /&gt;

---
### Matrix ë°©ì‹ 
ì´ ë°©ì‹ì€ co-occurrence ë§í¬ì¸ ê²½ìš°ë„ ì ìš©ê°€ëŠ¥í•˜ì§€ë§Œ, í”„ë¡œíŒŒì¼ ë²¡í„° ê°„ì˜ ìœ ì‚¬ë„ë¥¼ ê³„ì‚°í•˜ê¸° ìœ„í•´ í•„ìš”í•œ ê¸°ë²•ì„. 

ë¨¼ì € musician(í–‰) x record(ì—´)ì¸ í–‰ë ¬ì„ ìƒì„±í•  ê²ƒì„. 

```r
# ì•ì—ì„œ ìƒì„±í•œ dt_longë¶€í„° ì‹œì‘ 
row_name &lt;- unique(dt_long$musician)
column_name &lt;- unique(dt_long$rec)
row_id &lt;- match(dt_long$musician, row_name) # ì¸ë±ìŠ¤ ë²ˆí˜¸ ì¶”ì¶œ 
column_id &lt;- match(dt_long$rec, column_name) # sparse matrix ìƒì„±ì— í•„ìš”
```


```r
library(Matrix)
# MatrixíŒ¨í‚¤ì§€ì˜ sparse matrix ìƒì„± 
mat_sparse &lt;- sparseMatrix(i = row_id,
                           j = column_id,
                           x = 1L,
                           dimnames = list(
                             row_name, 
                             column_name))
```
---
sparse matrix ì˜¤ë¸Œì íŠ¸ê°€ ì„±ëŠ¥ê³¼ ë©”ëª¨ë¦¬ ê´€ë¦¬ì— í›¨ì”¬ íš¨ìœ¨ì ì„. 


```r
mat_res &lt;- mat_sparse %*% t(mat_sparse) # í–‰ë ¬ ê³±ì„ í•œë‹¤
mat_res2 &lt;- triu(mat_res, k = 1) # ëŒ€ì¹­ì´ë¯€ë¡œ, ëŒ€ê°ê°’ì„ í¬í•¨í•˜ì—¬ í•˜ì‚¼ê°ì„ ì œì™¸
mat_fin &lt;- summary(mat_res2) # summary í•¨ìˆ˜ë¡œ pair ë¦¬ìŠ¤íŠ¸ë¥¼ ë°›ëŠ”ë‹¤
head(mat_fin, 10) # ì¸ë±ìŠ¤ ë²ˆí˜¸ë¡œ ë°˜í™˜
```

```
## 10 x 10 sparse Matrix of class "dtCMatrix", with 25 entries 
##    i j x
## 1  1 2 1
## 2  1 3 1
## 3  2 3 2
## 4  1 4 1
## 5  2 4 2
## 6  3 4 2
## 7  1 5 1
## 8  4 5 1
## 9  1 6 1
## 10 2 6 1
```

sparse matrix ìì²´ë¥¼ ì…ë ¥ê°’ìœ¼ë¡œ í•˜ì—¬ í–‰ ê¸°ì¤€(ìœ„ ì‚¬ë¡€)ì˜ pairìŒì— ëŒ€í•´ ìœ ì‚¬ë„ë¥¼ ê³„ì‚°í•  ìˆ˜ ìˆìŒ (í”„ë¡œíŒŒì¼ ê¸°ë°˜ ìœ ì‚¬ë„ ë§í¬). 

`text2vec::sim2(m_sparse, method = "cosine", norm = "l2")`
---
ê²°ê³¼ë¡œ ë°›ì€ ì¸ë±ìŠ¤ ë²ˆí˜¸ë¥¼ ì•ì—ì„œ ë§Œë“¤ì–´ ë‘” ì´ë¦„ ë²¡í„°ì— ì§‘ì–´ ë„£ì–´ ë‹¤ì‹œ ì´ë¦„ì„ ë°˜í™˜í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ìµœì¢… ì›í•˜ëŠ” ë°ì´í„°í”„ë ˆì„ì„ ìƒì„±í•œë‹¤.


```r
df &lt;- data.frame(from = row_name[mat_fin$i],
                 to = row_name[mat_fin$j],
                 weight = mat_fin$x)
g &lt;- as_tbl_graph(df, directed = FALSE)
plot(g)
```

![](network_course_part01_files/figure-html/unnamed-chunk-54-1.png)&lt;!-- --&gt;
---
class: inverse
### ì—°ìŠµë¬¸ì œ 

* ë‹¤ìŒ ë°ì´í„°í”„ë ˆì„ì—ì„œ êµ­ê°€ ê°„ í˜‘ë ¥ì—°êµ¬ ë„¤íŠ¸ì›Œí¬ë¥¼ ë„ì¶œí•˜ê³ , ì‹œê°í™”ê¹Œì§€ í•´ë³´ì„¸ìš”.
  í˜‘ë ¥ ì—°êµ¬ê°€ ì•„ë‹ˆë¼ ë‹¨ì¼ êµ­ê°€ì˜ ë…¼ë¬¸ì´ ì¡´ì¬í•©ë‹ˆë‹¤. ì´ì— ëŒ€í•œ ì²˜ë¦¬ì— ì¡°ê¸ˆ ì‹ ê²½ì“°ì…”ì•¼ í•©ë‹ˆë‹¤. 
  

```r
wos &lt;- data.frame(UT = 1:10,
                       country = c("South Korea", "USA;Japan", "Japan;Germany",
                                   "South Korea;USA;Germany", "Germany", 
                                   "USA;Germany", "Japan;France;Germany",
                                   "France;Germany", "USA;South Korea", "USA"))
```

---
class: inverse

# ë‚´ì¼ì€ 

* tidygraph, ggraphì˜ ê¸°ì´ˆ ë¬¸ë²• 

* ë°ì´í„°ì˜ ë°˜ì…(import), ë°˜ì¶œ(export) ê¸°ë²• 

* tidygraph, ggraphë¥¼ ì´ìš©í•œ (ì¤‘ê³ ê¸‰) ë°ì´í„° ì²˜ë¦¬ ê¸°ë²•

* Web of Science ì‹¤ì œ ë°ì´í„° ì²˜ë¦¬ ì‹¤ìŠµ  

* ì„œì§€ë°ì´í„° ë³´ì™„ì„ ìœ„í•œ crossref API ì´ìš© ë§›ë³´ê¸°

---
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script src="macros.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
